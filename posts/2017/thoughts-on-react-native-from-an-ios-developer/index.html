<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Thoughts on React Native from an iOS developer | Life is a refactoring process without tests</title>
<meta name=keywords content="React Native,Mobile App Development"><meta name=description content="About two month ago, I started making a React Native app &ldquo;PyConTW 17&rdquo; for the biggest annual Python conference in Taiwan (PyCon Taiwan). The app is quite simple, but still took some efforts for me to build. As a complete React newbie, I would like to share some of my thoughts about React Native.
(written on 2017-07-30, based on React Native 0.44.2)
Disclaimer: I am a junior iOS developer (about 1 year experience) without any computer science degree."><meta name=author content><link rel=canonical href=https://weihanglo.tw/posts/2017/thoughts-on-react-native-from-an-ios-developer/><link crossorigin=anonymous href=/assets/css/stylesheet.css rel="preload stylesheet" as=style><link rel=icon href=https://weihanglo.tw/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://weihanglo.tw/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://weihanglo.tw/favicon-32x32.png><link rel=apple-touch-icon href=https://weihanglo.tw/apple-touch-icon.png><link rel=mask-icon href=https://weihanglo.tw/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://weihanglo.tw/posts/2017/thoughts-on-react-native-from-an-ios-developer/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css integrity=sha384-MlJdn/WNKDGXveldHDdyRP1R4CTHr3FeuDNfhsLPYrq2t0UBkUdK2jyTnXPEK1NQ crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.js integrity=sha384-VQ8d8WVFw0yHhCk5E8I86oOhv48xLpnDZx5T9GogA/Y84DcCKWXDmSDfn13bzFZY crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/contrib/auto-render.min.js integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR crossorigin=anonymous></script><script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}],throwOnError:!1})})</script><meta property="og:title" content="Thoughts on React Native from an iOS developer"><meta property="og:description" content="About two month ago, I started making a React Native app &ldquo;PyConTW 17&rdquo; for the biggest annual Python conference in Taiwan (PyCon Taiwan). The app is quite simple, but still took some efforts for me to build. As a complete React newbie, I would like to share some of my thoughts about React Native.
(written on 2017-07-30, based on React Native 0.44.2)
Disclaimer: I am a junior iOS developer (about 1 year experience) without any computer science degree."><meta property="og:type" content="article"><meta property="og:url" content="https://weihanglo.tw/posts/2017/thoughts-on-react-native-from-an-ios-developer/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2017-07-30T18:16:45+08:00"><meta property="article:modified_time" content="2017-07-30T18:16:45+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Thoughts on React Native from an iOS developer"><meta name=twitter:description content="About two month ago, I started making a React Native app &ldquo;PyConTW 17&rdquo; for the biggest annual Python conference in Taiwan (PyCon Taiwan). The app is quite simple, but still took some efforts for me to build. As a complete React newbie, I would like to share some of my thoughts about React Native.
(written on 2017-07-30, based on React Native 0.44.2)
Disclaimer: I am a junior iOS developer (about 1 year experience) without any computer science degree."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://weihanglo.tw/posts/"},{"@type":"ListItem","position":2,"name":"Thoughts on React Native from an iOS developer","item":"https://weihanglo.tw/posts/2017/thoughts-on-react-native-from-an-ios-developer/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Thoughts on React Native from an iOS developer","name":"Thoughts on React Native from an iOS developer","description":"About two month ago, I started making a React Native app \u0026ldquo;PyConTW 17\u0026rdquo; for the biggest annual Python conference in Taiwan (PyCon Taiwan). The app is quite simple, but still took some efforts for me to build. As a complete React newbie, I would like to share some of my thoughts about React Native.\n(written on 2017-07-30, based on React Native 0.44.2)\nDisclaimer: I am a junior iOS developer (about 1 year experience) without any computer science degree.","keywords":["React Native","Mobile App Development"],"articleBody":" About two month ago, I started making a React Native app “PyConTW 17” for the biggest annual Python conference in Taiwan (PyCon Taiwan). The app is quite simple, but still took some efforts for me to build. As a complete React newbie, I would like to share some of my thoughts about React Native.\n(written on 2017-07-30, based on React Native 0.44.2)\nDisclaimer: I am a junior iOS developer (about 1 year experience) without any computer science degree. This article is based on my 2 weeks React Native experience developing “PyConTW 17” and React knowledge gained from my job recently.\nWhat I’ve done Before sharing my point of view, let’s learn what features are included in this conference app:\nA user could view all event/talk information of the whole conference. A user could save some favorite events for quick access (saved locally). A user could filter events by pre-defined tags of category. Events would update automatically if any data in database changes. As an iOS developer, you may feel familiar with these requirements. The app may be just a tabbar-based app with some customized table view to display contents. No database. No synchronization for user-generated data. Our React Native version app share with this basic anatomy mentioned above. Therefore, the UI architecture only contains some views such as list views, detail views of event/speaker, and the main app container. That’s all in this app.\nThe good part Shared codebase This project seems to only contain trivial implementation details from an veteran iOS developer’s perspective. What if you need to target at both Android and iOS in one week? Learning Android development from scratch may not be suitable with an approaching deadline, and the separation of codebase may be prone to maintenance issues in the long run. To achieve the goal, you could choose React Native in order to wrap the core logic into one codebase. No more switches between Android Studio and Xcode. React Native would give us a truly native app. That’s why React Native hypes.\nFaster development iteration We are all tired of write-compile-debug iteration for our daily mobile app development. With the growth of the bundle size, it would take more time to build our app (especially in Swift). React Native uses some tricks like Hot and Live Reloading to refresh your simulator/emulator instantly without recompilation. That’s really an incredible time saver.\nMoreover, if you choose Create React Native App as the scaffolding tool, you can gain benefits from Expo platform to test your app in real devices without any wired connection. What you need to do is scanning the QR code and coding. This is a huge leap from traditional mobile native development cycle.\nClever devtools Did you remember the last time using the View Hierarchy Debugger in Xcode? This tool is very awesome for visually debugging, but sometime it’s quite laggy with complicated views hierarchy (improved in Xcode 8), and that leads to frustration. The solution React Native providing is a web-browser-like inspector for us to inspect elements on simulators. With the inspector, you can see box model, styles and even inheritance hierarchy of the selected component without long wait for the rainbow ball rotating. Additional, React Native also has a performance panel to help you achieve 60 FPS animations.\nIf you need more advanced debug tools, there is also a remote debugging plugin available. You can download it from Chrome Web Store or Firefox Add-ons. This debugger allows inspection of React component instances, and you can also see logs from browser console.\nThere are still lots of tools that did not cover in this article. Either tools offered by Facebook or contribute by communities (like Redux Devtools) are convenient for daily use. Feel free from escaping Xcode!\nTo be honest, Xcode provides plenty of excellent debugging and profiling tools which are greater than those browsers have. However, they are not easy to start with, and every iOS developer I met seldom uses them.\nModern JavaScript JavaScript is very promising these years. ES2015 introduced lots of anticipating modern feature such as Promise and Generator. However, due to the diversity of browser ecosystem, if one wants to use new features to support most browser vendors, it will need to add some polyfills or transpile all code to the target version. However, the setup procedure of build environment for transpilation is annoying to some extent.\nIn React Native development, this is no longer a problem. All we need are done by a scaffolding tool called react-native-cli. This tool will setup a modern JavaScript development environment with all new JavaScript features. We can boldly use async/await syntax to avoid callback hell, and even use the new fetch Web API for HTTP requests. In comparison of old web-based hybrid technology such as Cordova, React Native eliminates the scary setup process and brings all pleasant stuff to live!\nDependency management Another sweet point of React Native is the dependency management. CocoaPods is de facto dependency manager for Cocoa development, yet it is written in Ruby that increases costs to learn. Nowadays we get Carthage which is written in pure Swift, though it still has some issues as dependencies being more complex and nested. No one want drag all dependencies of 3rd module manually.\nAs for React Native, we can use Npm (or Yarn I recommended), one the best dependency management and ecosystem in the world. Npm reduces the painful workspace regeneration and sharing issue with CocoaPods, as well as manages dependencies with nested resolution to avoid incorrect versioning. Though the whole packages may be a little bit large, it may not be a problem for a mobile app. After all, the connection status on the internet is more strict than native app. We should be content that we do not need to download all resources on every single launch.\nCommunity There are always a strong community behind a successful open source project. So does React Native. The community of React Native is one of the most active open source communities. Developers proficient in Android or iOS create lots of useful native modules to break down the barrier between native code and JavaScript. A famous example is React Native SVG which implements SVG rendition with native rendering API (on iOS, it use CoreGraphics to accomplish).\nOther developers coming from React community bring more new web development concepts to mobile land. For instance, unidirectional data flow, state management, component-based architecture, router patterns and many others. These concepts also have influenced back on pure native development, and invoke the reconsideration of traditional MVC/MVP/MVVM architecture. More and more talks discuss about view purification and state centralization. Some enthusiasts even started to develop a new state management module called ReSwift, which is inspired by Redux.\nThe benefit of these abstractions is not only full of cool jargons but predictable, making views become testable. The most important impact on native development in my opinion is the concept of predictable unit tests, which is absent in traditional MVC architecture.\nThe pain points One codebase cannot rule them all If you have read the official React Native website thoroughly, you will notice that the slogan of React Native is “Learn once, write anywhere” instead of \"run anywhere\". One can realize that React Native does not aim to be shareable between different platforms. Actually, Facebook suggests that developers should design different components for different platforms to match platform-specified user experience. For example, an Android app may not need an back button for navigations because each Android device has a physical back button.\nAnother issue is related to platform differences. Not all API on iOS could meet a compatible API on Android. For examples, shadowProps have no effect on Android yet Android has another elevation style to generate a shadow-like visual effect. We may also face on some bug in old buggy webview of iOS like not calling WebView#onLoadEnd after loaded. When it comes to build system, you may overwhelm by diverse toolsets for each platform. For me, I must learn groovy to write some gradle scripts which only read keystore property for app signing and submission. How painful!\nAs far as you dive into mobile app development, you will find that the basic API of React Native are always not enough to use. Instead, you would aware yourself stackoverflowing around and looking for other out-of-the-box libraries to use immediately. Although there are hundreds of open source libraries for cross platform React Native development, every single library is written in at least two different programming language to accomplish its purpose, and that means double knowledge and cost are included. From build system to rendering API, each platform needs specific approaches to optimize all aspects. Therefore, you shall not treat those libraries as normal JavaScript modules. Native development is that hard.\nAs an iOS developer, if there is no any React Native module that meets your needs, you need to tell your boss to recruit a real Android man for help, or pay you double to learn the whole new Android development stack.\nSteep learning curve As a traditional mobile app developer, you are familiar with object-oriented programming. Factory pattern, adapter pattern appear all of your daily life. What if someone told you that your function is not pure enough and suggest to use monad to wrap your API? These are all functional programming buzz words. Despite of flexibility of React Native, the Thinking in React concept makes React fit for functional programming paradigm. Most of the open source libraries built around React ecosystem conform to functional programming pattern. If you determine to adopt React Native into your development stack, it may spend additional efforts to learn with all those jargons. From a manager’s perspective, it is hard to recruit a well trained programmer equipped with functional programming skills (at least in Taiwan).\nConcurrency React Native uses JavaScriptCore to handle all JavaScript code, request for resources, and communicate with native code. Under the hood, all JavaScript code run in JS thread. This JS thread is a real system-level thread which would work asynchronously with the main thread (UI thread). Here is one thing you must know: UI thread and JS thread are the only two threads developers will get in an pure React Native app. That’s where the problem begins.\nWhen we wants to do some heavy computation like encryption or data transformation, all user interactions will be stuck without any feedback because all JavaScript code is run under a single-threaded JavaScript engine. That’s not acceptable for an app concerned with user experience. Though we can do some tricks with the help of JavaScript message queue, the heavy computation still awaits there and gets ready for blocking the main thread.\nOn Cocoa, we have the wonderful Grand Central Dispatch (Dispatch framework in Swift 3), which abstracts thread management for us to do concurrent jobs. In React Native, if we want to manage real threads on our own, the only way is leaking abstractions. We need to write a native module creating another JSVirtualMachine and expose API to React Native. Sounds great, but also like an terrifying obstacle to those not familiar with native. You should always consider performance issue in comparison between JavaScript and native solutions (Hi Electron, I am talking to you).\nIs React Native worth learning? The short answer is: yes.\nThe long answer is: definitely yes for your next application. Learning React Native can leverage your knowledge to another level. Those impressive, promising concepts will sharpen your skills and bring great ideas to your software development knowledge. If you are still concerning about the cost of switch to React Native, here are some scenarios for you to choose React Native over native platform:\nNeed to build this app within a short period of time. Single purpose app like “PyConTW 17” is most suitable. Not heavily rely on native API (sorry to HealthKit, ARKit and SiriKit). User interface is relative simple. Have teammate with strong native experience (we need both Android and iOS). Your team applies Hype Driven Development. After all, everything in life is a trade off. Just ship your code and enjoy the evolving mobile app development world!\n","wordCount":"2021","inLanguage":"en","datePublished":"2017-07-30T18:16:45+08:00","dateModified":"2017-07-30T18:16:45+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://weihanglo.tw/posts/2017/thoughts-on-react-native-from-an-ios-developer/"},"publisher":{"@type":"Organization","name":"Life is a refactoring process without tests","logo":{"@type":"ImageObject","url":"https://weihanglo.tw/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://weihanglo.tw/ accesskey=h title="Life is a refactoring process without tests (Alt + H)">Life is a refactoring process without tests</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://weihanglo.tw/ title=Home><span>Home</span></a></li><li><a href=https://weihanglo.tw/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://weihanglo.tw/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://weihanglo.tw/about/ title=About><span>About</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">Thoughts on React Native from an iOS developer</h1><div class=post-meta><span title='2017-07-30 18:16:45 +0800 +0800'>July 30, 2017</span>&nbsp;·&nbsp;10 min</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#what-ive-done aria-label="What I&rsquo;ve done">What I&rsquo;ve done</a></li><li><a href=#the-good-part aria-label="The good part">The good part</a><ul><li><a href=#shared-codebase aria-label="Shared codebase">Shared codebase</a></li><li><a href=#faster-development-iteration aria-label="Faster development iteration">Faster development iteration</a></li><li><a href=#clever-devtools aria-label="Clever devtools">Clever devtools</a></li><li><a href=#modern-javascript aria-label="Modern JavaScript">Modern JavaScript</a></li><li><a href=#dependency-management aria-label="Dependency management">Dependency management</a></li><li><a href=#community aria-label=Community>Community</a></li></ul></li><li><a href=#the-pain-points aria-label="The pain points">The pain points</a><ul><li><a href=#one-codebase-cannot-rule-them-all aria-label="One codebase cannot rule them all">One codebase cannot rule them all</a></li><li><a href=#steep-learning-curve aria-label="Steep learning curve">Steep learning curve</a></li><li><a href=#concurrency aria-label=Concurrency>Concurrency</a></li></ul></li><li><a href=#is-react-native-worth-learning aria-label="Is React Native worth learning?">Is React Native worth learning?</a></li></ul></div></details></div><div class=post-content><p><img loading=lazy src=https://i.imgur.com/Ya2NnLz.png alt="React Native"></p><p>About two month ago, I started making a React Native app <a href=https://github.com/weihanglo/pycontw-mobile>&ldquo;PyConTW 17&rdquo;</a> for the biggest annual Python conference in Taiwan (<a href=https://tw.pycon.org>PyCon Taiwan</a>). The app is quite simple, but still took some efforts for me to build. As a complete React newbie, I would like to share some of my thoughts about React Native.</p><p><em>(written on 2017-07-30, based on React Native 0.44.2)</em></p><blockquote><p><strong>Disclaimer</strong>: I am a junior iOS developer (about 1 year experience) without any computer science degree. This article is based on my 2 weeks React Native experience developing &ldquo;PyConTW 17&rdquo; and React knowledge gained from my job recently.</p></blockquote><h2 id=what-ive-done>What I&rsquo;ve done<a hidden class=anchor aria-hidden=true href=#what-ive-done>#</a></h2><p>Before sharing my point of view, let&rsquo;s learn what features are included in this conference app:</p><ul><li>A user could view all event/talk information of the whole conference.</li><li>A user could save some favorite events for quick access (saved locally).</li><li>A user could filter events by pre-defined tags of category.</li><li>Events would update automatically if any data in database changes.</li></ul><p>As an iOS developer, you may feel familiar with these requirements. The app may be just a tabbar-based app with some customized table view to display contents. No database. No synchronization for user-generated data. Our React Native version app share with this basic anatomy mentioned above. Therefore, the UI architecture only contains some views such as list views, detail views of event/speaker, and the main app container. That&rsquo;s all in this app.</p><h2 id=the-good-part>The good part<a hidden class=anchor aria-hidden=true href=#the-good-part>#</a></h2><h3 id=shared-codebase>Shared codebase<a hidden class=anchor aria-hidden=true href=#shared-codebase>#</a></h3><p>This project seems to only contain trivial implementation details from an veteran iOS developer&rsquo;s perspective. What if you need to target at both Android and iOS in one week? Learning Android development from scratch may not be suitable with an approaching deadline, and the separation of codebase may be prone to maintenance issues in the long run. To achieve the goal, you could choose React Native in order to <strong>wrap the core logic into one codebase</strong>. No more switches between Android Studio and Xcode. React Native would give us a truly native app. That&rsquo;s why React Native hypes.</p><h3 id=faster-development-iteration>Faster development iteration<a hidden class=anchor aria-hidden=true href=#faster-development-iteration>#</a></h3><p>We are all tired of write-compile-debug iteration for our daily mobile app development. With the growth of the bundle size, it would take more time to build our app (especially in Swift). React Native uses some tricks like <a href=http://facebook.github.io/react-native/releases/next/docs/debugging.html#reloading-javascript>Hot and Live Reloading</a> to refresh your simulator/emulator instantly without recompilation. That&rsquo;s really an incredible time saver.</p><p>Moreover, if you choose <a href=https://github.com/react-community/create-react-native-app>Create React Native App</a> as the scaffolding tool, you can gain benefits from <a href=https://expo.io/>Expo</a> platform to test your app in real devices without any wired connection. What you need to do is scanning the QR code and coding. This is a huge leap from traditional mobile native development cycle.</p><h3 id=clever-devtools>Clever devtools<a hidden class=anchor aria-hidden=true href=#clever-devtools>#</a></h3><p>Did you remember the last time using the <strong>View Hierarchy Debugger</strong> in Xcode? This tool is very awesome for visually debugging, but sometime it&rsquo;s quite laggy with complicated views hierarchy (improved in Xcode 8), and that leads to frustration. The solution React Native providing is a web-browser-like <code>inspector</code> for us to inspect elements on simulators. With the inspector, you can see box model, styles and even inheritance hierarchy of the selected component without long wait for the rainbow ball rotating. Additional, React Native also has a performance panel to help you achieve 60 FPS animations.</p><p>If you need more advanced debug tools, there is also a <a href=https://github.com/facebook/react-devtools>remote debugging plugin</a> available. You can <strong>download it from Chrome Web Store or Firefox Add-ons</strong>. This debugger allows inspection of React component instances, and you can also see logs from browser console.</p><p>There are still lots of tools that did not cover in this article. Either tools offered by Facebook or contribute by communities (like <a href=https://github.com/gaearon/redux-devtools>Redux Devtools</a>) are convenient for daily use. Feel free from escaping Xcode!</p><blockquote><p>To be honest, Xcode provides plenty of excellent debugging and profiling tools which are greater than those browsers have. However, they are not easy to start with, and every iOS developer I met seldom uses them.</p></blockquote><h3 id=modern-javascript>Modern JavaScript<a hidden class=anchor aria-hidden=true href=#modern-javascript>#</a></h3><p>JavaScript is very promising these years. ES2015 introduced lots of anticipating modern feature such as <code>Promise</code> and <code>Generator</code>. However, due to the diversity of browser ecosystem, if one wants to use new features to support most browser vendors, it will need to add some polyfills or transpile all code to the target version. However, the setup procedure of build environment for transpilation is annoying to some extent.</p><p>In React Native development, this is no longer a problem. All we need are done by a scaffolding tool called <code>react-native-cli</code>. This tool will setup a modern JavaScript development environment with all new JavaScript features. We can boldly use <code>async/await</code> syntax to avoid callback hell, and even use the new <code>fetch</code> Web API for HTTP requests. In comparison of old web-based hybrid technology such as Cordova, React Native eliminates the scary setup process and brings all pleasant stuff to live!</p><h3 id=dependency-management>Dependency management<a hidden class=anchor aria-hidden=true href=#dependency-management>#</a></h3><p>Another sweet point of React Native is the dependency management. <strong>CocoaPods</strong> is de facto dependency manager for Cocoa development, yet it is written in Ruby that increases costs to learn. Nowadays we get <strong>Carthage</strong> which is written in pure Swift, though it still has <a href=https://github.com/Carthage/Carthage#nested-dependencies>some issues</a> as dependencies being more complex and nested. No one want drag all dependencies of 3rd module manually.</p><p>As for React Native, we can use <strong>Npm</strong> (or <a href=https://yarnpkg.com>Yarn</a> I recommended), one the best dependency management and ecosystem in the world. Npm reduces the painful <strong>workspace</strong> regeneration and sharing issue with CocoaPods, as well as manages dependencies with nested resolution to avoid incorrect versioning. Though the whole packages may be a little bit large, it may not be a problem for a mobile app. After all, the connection status on the internet is more strict than native app. We should be content that we do not need to download all resources on every single launch.</p><h3 id=community>Community<a hidden class=anchor aria-hidden=true href=#community>#</a></h3><p>There are always a strong community behind a successful open source project. So does React Native. The community of React Native is one of the most active open source communities. Developers proficient in Android or iOS create lots of useful native modules to break down the barrier between native code and JavaScript. A famous example is <a href=https://github.com/react-native-community/react-native-svg>React Native SVG</a> which implements SVG rendition with native rendering API (on iOS, it use <code>CoreGraphics</code> to accomplish).</p><p>Other developers coming from React community bring more new web development concepts to mobile land. For instance, unidirectional data flow, state management, component-based architecture, router patterns and many others. These concepts also have influenced back on pure native development, and invoke the reconsideration of traditional MVC/MVP/MVVM architecture. More and more talks discuss about view purification and state centralization. Some enthusiasts even started to develop a new state management module called <a href=https://github.com/ReSwift/ReSwift>ReSwift</a>, which is inspired by Redux.</p><p>The benefit of these abstractions is not only full of cool jargons but predictable, making views become testable. The most important impact on native development in my opinion is the concept of predictable unit tests, which is absent in traditional MVC architecture.</p><h2 id=the-pain-points>The pain points<a hidden class=anchor aria-hidden=true href=#the-pain-points>#</a></h2><p><img loading=lazy src=https://images.pexels.com/photos/34667/person-human-male-man.webp alt="pain points"></p><h3 id=one-codebase-cannot-rule-them-all>One codebase cannot rule them all<a hidden class=anchor aria-hidden=true href=#one-codebase-cannot-rule-them-all>#</a></h3><p>If you have read the official React Native website thoroughly, you will notice that the slogan of React Native is <em>&ldquo;Learn once, <strong>write</strong> anywhere&rdquo;</em> instead of <em>"<strong>run</strong> anywhere"</em>. One can realize that <strong>React Native does not aim to be shareable between different platforms</strong>. Actually, Facebook suggests that developers should <a href=http://makeitopen.com/tutorials/building-the-f8-app/design/>design different components for different platforms to match platform-specified user experience</a>. For example, an Android app may not need an back button for navigations because each Android device has a physical back button.</p><p>Another issue is related to platform differences. Not all API on iOS could meet a compatible API on Android. For examples, <code>shadowProps</code> have no effect on Android yet Android has another <code>elevation</code> style to generate a shadow-like visual effect. We may also face on some bug in old buggy webview of iOS like not calling <code>WebView#onLoadEnd</code> after loaded. When it comes to build system, you may overwhelm by diverse toolsets for each platform. For me, I must learn groovy to write some gradle scripts which only read <code>keystore</code> property for app signing and submission. How painful!</p><p>As far as you dive into mobile app development, you will find that the basic API of React Native are always not enough to use. Instead, you would aware yourself stackoverflowing around and looking for other out-of-the-box libraries to use immediately. Although there are hundreds of open source libraries for cross platform React Native development, every single library is written in at least two different programming language to accomplish its purpose, and that means double knowledge and cost are included. From build system to rendering API, each platform needs specific approaches to optimize all aspects. Therefore, you shall not treat those libraries as normal JavaScript modules. Native development is that hard.</p><blockquote><p>As an iOS developer, if there is no any React Native module that meets your needs, you need to tell your boss to recruit a real Android man for help, or pay you double to learn the whole new Android development stack.</p></blockquote><h3 id=steep-learning-curve>Steep learning curve<a hidden class=anchor aria-hidden=true href=#steep-learning-curve>#</a></h3><p>As a traditional mobile app developer, you are familiar with object-oriented programming. Factory pattern, adapter pattern appear all of your daily life. What if someone told you that your function is <strong>not pure</strong> enough and suggest to use <strong>monad</strong> to wrap your API? These are all functional programming buzz words. Despite of flexibility of React Native, the <a href=https://facebook.github.io/react/docs/thinking-in-react.html>Thinking in React</a> concept makes React fit for functional programming paradigm. Most of the open source libraries built around React ecosystem conform to functional programming pattern. If you determine to adopt React Native into your development stack, it may spend additional efforts to learn with <a href=https://git.io/fp-jargons>all those jargons</a>. From a manager&rsquo;s perspective, it is hard to recruit a well trained programmer equipped with functional programming skills (at least in Taiwan).</p><h3 id=concurrency>Concurrency<a hidden class=anchor aria-hidden=true href=#concurrency>#</a></h3><p>React Native uses <code>JavaScriptCore</code> to handle all JavaScript code, request for resources, and communicate with native code. Under the hood, all JavaScript code run in JS thread. This JS thread is a real system-level thread which would work asynchronously with the main thread (UI thread). Here is one thing you must know: <strong>UI thread and JS thread are the only two threads developers will get in an pure React Native app</strong>. That&rsquo;s where the problem begins.</p><p>When we wants to do some heavy computation like encryption or data transformation, all user interactions will be stuck without any feedback because all JavaScript code is run under a single-threaded JavaScript engine. That&rsquo;s not acceptable for an app concerned with user experience. Though we can <a href=https://facebook.github.io/react-native/docs/performance.html#my-touchablex-view-isn-t-very-responsive>do some tricks</a> with the help of JavaScript message queue, the heavy computation still awaits there and gets ready for blocking the main thread.</p><p>On Cocoa, we have the wonderful <a href=https://en.wikipedia.org/wiki/Grand_Central_Dispatch>Grand Central Dispatch</a> (<code>Dispatch</code> framework in Swift 3), which abstracts thread management for us to do concurrent jobs. In React Native, if we want to manage real threads on our own, the only way is leaking abstractions. We need to write a native module creating another <code>JSVirtualMachine</code> and expose API to React Native. Sounds great, but also like an terrifying obstacle to those not familiar with native. You should always consider performance issue in comparison between JavaScript and native solutions (Hi Electron, I am talking to you).</p><h2 id=is-react-native-worth-learning>Is React Native worth learning?<a hidden class=anchor aria-hidden=true href=#is-react-native-worth-learning>#</a></h2><p>The short answer is: <strong>yes</strong>.</p><p>The long answer is: <strong>definitely yes for your next application</strong>. Learning React Native can leverage your knowledge to another level. Those impressive, promising concepts will sharpen your skills and bring great ideas to your software development knowledge. If you are still concerning about the cost of switch to React Native, here are some scenarios for you to choose React Native over native platform:</p><ul><li>Need to build this app within a short period of time.</li><li>Single purpose app like &ldquo;PyConTW 17&rdquo; is most suitable.</li><li>Not heavily rely on native API (sorry to HealthKit, ARKit and SiriKit).</li><li>User interface is relative simple.</li><li>Have teammate with strong native experience (we need both Android and iOS).</li><li>Your team applies <a href=https://blog.daftcode.pl/hype-driven-development-3469fc2e9b22>Hype Driven Development</a>.</li></ul><p>After all, <em>everything in life is a trade off.</em> Just ship your code and enjoy the evolving mobile app development world!</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://weihanglo.tw/tags/react-native/>React Native</a></li><li><a href=https://weihanglo.tw/tags/mobile-app-development/>Mobile App Development</a></li></ul><nav class=paginav><a class=prev href=https://weihanglo.tw/posts/2017/intro-rx-0-reactivex/><span class=title>« Prev</span><br><span>Rx 入門零：ReactiveX</span>
</a><a class=next href=https://weihanglo.tw/posts/2017/answers-to-cherny-interview-questions/><span class=title>Next »</span><br><span>試答 Cherny 所謂「最好的前端面試題」</span></a></nav></footer></article></main><footer class=footer><span>CC BY-NC-SA 4.0</span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>