<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Swift 初學速記 | Life is a refactoring process without tests</title>
<meta name=keywords content="Swift"><meta name=description content="簡單記錄 Apple 官方 Swift Guide 的重點與心得。 （撰於 2017-02-06，基於 Swift 3.1） Declaration 宣告變數使用 var，宣告常數使用 let 使用 var 宣告，該值為 mutable 使用 let 宣告"><meta name=author content><link rel=canonical href=https://weihanglo.tw/posts/2017/swift-quick-note/><link crossorigin=anonymous href=/assets/css/stylesheet.css rel="preload stylesheet" as=style><link rel=icon href=https://weihanglo.tw/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://weihanglo.tw/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://weihanglo.tw/favicon-32x32.png><link rel=apple-touch-icon href=https://weihanglo.tw/apple-touch-icon.png><link rel=mask-icon href=https://weihanglo.tw/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://weihanglo.tw/posts/2017/swift-quick-note/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css integrity=sha384-MlJdn/WNKDGXveldHDdyRP1R4CTHr3FeuDNfhsLPYrq2t0UBkUdK2jyTnXPEK1NQ crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.js integrity=sha384-VQ8d8WVFw0yHhCk5E8I86oOhv48xLpnDZx5T9GogA/Y84DcCKWXDmSDfn13bzFZY crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/contrib/auto-render.min.js integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR crossorigin=anonymous></script><script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}],throwOnError:!1})})</script><meta property="og:title" content="Swift 初學速記"><meta property="og:description" content="簡單記錄 Apple 官方 Swift Guide 的重點與心得。 （撰於 2017-02-06，基於 Swift 3.1） Declaration 宣告變數使用 var，宣告常數使用 let 使用 var 宣告，該值為 mutable 使用 let 宣告"><meta property="og:type" content="article"><meta property="og:url" content="https://weihanglo.tw/posts/2017/swift-quick-note/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2017-02-06T23:25:19+08:00"><meta property="article:modified_time" content="2017-02-06T23:25:19+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Swift 初學速記"><meta name=twitter:description content="簡單記錄 Apple 官方 Swift Guide 的重點與心得。 （撰於 2017-02-06，基於 Swift 3.1） Declaration 宣告變數使用 var，宣告常數使用 let 使用 var 宣告，該值為 mutable 使用 let 宣告"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://weihanglo.tw/posts/"},{"@type":"ListItem","position":2,"name":"Swift 初學速記","item":"https://weihanglo.tw/posts/2017/swift-quick-note/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Swift 初學速記","name":"Swift 初學速記","description":"簡單記錄 Apple 官方 Swift Guide 的重點與心得。 （撰於 2017-02-06，基於 Swift 3.1） Declaration 宣告變數使用 var，宣告常數使用 let 使用 var 宣告，該值為 mutable 使用 let 宣告","keywords":["Swift"],"articleBody":"簡單記錄 Apple 官方 Swift Guide 的重點與心得。\n（撰於 2017-02-06，基於 Swift 3.1）\nDeclaration 宣告變數使用 var，宣告常數使用 let\n使用 var 宣告，該值為 mutable 使用 let 宣告，該值為 immutable let myConst = \"constant\" var myVar = 1234 myVar = 5678 慣例是都先使用 let 宣告，等到之後需求或 compiler 報錯時，再修正為 mutable 的 var\nType Inference 自動透過賦予的值推斷型別，也可以顯式聲明型別。\nlet doubleValue = 70.0 // Double type let myStr: String myStr = \"1234\" Type Safety Swift 是一個非常嚴謹的語言，注重型別安全（Type Safety）\n宣告常數、變數時必須賦值或聲明顯示型別 常數、變數使用前必須給定初始值 型別無法任意轉換，必須顯式指定型別轉換。 Fundamental data type Swift Standard Library 定義了許多基本型別：\nInteger/Unsigned Integer, Double, Float let myInt = 1234 // integer let myInt8: Int8 = 1234 // 8-bit integer let myUInt: UInt = 1234 // unsigned integer let myDouble = 1234.0 // double let anotherDouble: Double = 123 // double let myFloat: Float = 123.0 Boolean 布林值不再用 YES NO，改為 true false\nlet myBoolean = true let myFalse: Bool = false String 是字元集合（但非 Array 這種 collection type）\nlet myStr = \"hello, world\" let anotherStr: String = \"hello, swift\" print(myStr.hasPrefix('hello')) // true Swift 字串不僅是簡單的字元集合，有許多針對 Unicode support 與 橋接 NSString 的設計，但由於不太方便調用，預計 Swift 4 會大幅修正\nArray/Dictionary 最常用的兩種 collection type，字面量使用 [] 將值包裹，Dictionary 使用 key: value 表示。\nvar array = [1, 2, 3, 4] print(array[2]) // 2 array[2] = 3 print(array[2]) // 3 var dict = [\"A\": 1, \"B\": 2] print(dict[\"A\"]) // 1 dict[\"A\"] = 5 print(dict[\"A\"]) // 5 除了這些基本型別，import Foundation 後也可以使用諸如 NSString、NSArray 這類 Foundation Object。不過 Swift 與 Objective-C 橋接做得很好，建議能用 Stdlib 解決就不要用 Foundation Object。\nOperator Swift 的 運算子大多都與 C/Objective-C 雷同。 值得一提的是，所有運算子都是在 standard library 中以 function 的形式宣告。\ni++ ++i 這種 prefix/postfix increment 在 Swift 3 之後完全移除了\n=== operator Swift 中新增的運算子，用來比較 reference type 指向的實例（比較 memory address）是否相同。功能等同 Objective-C 的 [NSObject isEqual:]。\nType checking/casting is：檢查實例是否為特定子類別 as：將實例轉型為其他相關子類別 as?：轉型失敗回傳 nil as!：強迫轉型（不建議使用） as 也可以和 value-binding 搭配服用 let myInt: Int = 10 myInt is Int // true myInt as? String // nil // value-binding 搶先看 ----------- func testType(_ variable: Any) { switch variable { case let variable as Double: print(\"Double \\(variable)\") case let variable as Int: print(\"Int \\(variable)\") case let variable as String: print(\"String \\(variable)\") default: print(\"Unknown Type\") } } let a: Any = 10 let b: Any = String(10) let c: Array = [1, 2, 3, 4] testType(a) testType(b) testType(c) // Int 10 // String 10 // Unknown Type Control Flow 與 C/Objective-C 的共通點：\n大多數寫法類似 statements 內宣告的變數生命週期只在該 code block 內，不污染 outer scope if/else condition 可省略 ()（主流 coding style 會省略） 無論 statement 有幾行，都一定要用 {} 包裹起來。 let a = 6 if (a \u003e 5) print(a) // compile error if a \u003e 5 { print(a) } if a \u003e 5 { // true go here } else { // false go here } for 使用 for ... in 的寫法 condition 不可以加上 () 無論 statement 有幾行，都一定要用 {} 包裹起來。 let abcd = [\"A\", \"B\", \"C\", \"D\"] for i in abcd { print(i) } Swift 3 後，無法使用傳統 C style for loop for (int i = 0; i \u003c 5; i++)，若需取得 index，可以：\n使用 enumerated 方法。 使用 Range Operator 產生 Range Object (不推薦，容易 out of range) let abcd = [\"A\", \"B\", \"C\", \"D\"] for (idx, val) in abcd.enumerated() { print(idx, val) } for val in 0..","wordCount":"4071","inLanguage":"en","datePublished":"2017-02-06T23:25:19+08:00","dateModified":"2017-02-06T23:25:19+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://weihanglo.tw/posts/2017/swift-quick-note/"},"publisher":{"@type":"Organization","name":"Life is a refactoring process without tests","logo":{"@type":"ImageObject","url":"https://weihanglo.tw/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://weihanglo.tw/ accesskey=h title="Life is a refactoring process without tests (Alt + H)">Life is a refactoring process without tests</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://weihanglo.tw/ title=Home><span>Home</span></a></li><li><a href=https://weihanglo.tw/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://weihanglo.tw/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://weihanglo.tw/about/ title=About><span>About</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">Swift 初學速記</h1><div class=post-meta><span title='2017-02-06 23:25:19 +0800 +0800'>February 6, 2017</span>&nbsp;·&nbsp;9 min</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#declaration aria-label=Declaration>Declaration</a><ul><li><a href=#type-inference aria-label="Type Inference">Type Inference</a></li><li><a href=#type-safety aria-label="Type Safety">Type Safety</a></li></ul></li><li><a href=#fundamental-data-type aria-label="Fundamental data type">Fundamental data type</a><ul><li><a href=#integerunsigned-integer-double-float aria-label="Integer/Unsigned Integer, Double, Float">Integer/Unsigned Integer, Double, Float</a></li><li><a href=#boolean aria-label=Boolean>Boolean</a></li><li><a href=#string aria-label=String>String</a></li><li><a href=#arraydictionary aria-label=Array/Dictionary>Array/Dictionary</a></li></ul></li><li><a href=#operator aria-label=Operator>Operator</a><ul><li><a href=#-operator aria-label="=== operator">=== operator</a></li><li><a href=#type-checkingcasting aria-label="Type checking/casting">Type checking/casting</a></li></ul></li><li><a href=#control-flow aria-label="Control Flow">Control Flow</a><ul><li><a href=#ifelse aria-label=if/else>if/else</a></li><li><a href=#for aria-label=for>for</a></li><li><a href=#whilerepeat-while aria-label=while/repeat-while>while/repeat-while</a></li><li><a href=#switch aria-label=switch>switch</a></li><li><a href=#guard-else aria-label=guard-else>guard-else</a></li><li><a href=#defer aria-label=defer>defer</a></li></ul></li><li><a href=#type-system aria-label="Type system">Type system</a><ul><li><a href=#value-type-vs-reference-type aria-label="Value Type V.S. Reference Type">Value Type V.S. Reference Type</a></li></ul></li><li><a href=#class aria-label=Class>Class</a><ul><li><a href=#declaration-1 aria-label=Declaration>Declaration</a></li><li><a href=#properties aria-label=Properties>Properties</a><ul><li><a href=#stored-property aria-label="Stored Property">Stored Property</a></li><li><a href=#computed-property aria-label="Computed Property">Computed Property</a></li><li><a href=#property-observers aria-label="Property Observers">Property Observers</a></li></ul></li><li><a href=#initialization aria-label=Initialization>Initialization</a></li></ul></li><li><a href=#struct aria-label=Struct>Struct</a></li><li><a href=#enum aria-label=Enum>Enum</a></li><li><a href=#optional aria-label=Optional>Optional</a><ul><li><a href=#unwrapping aria-label=Unwrapping>Unwrapping</a></li><li><a href=#optional-chaining aria-label="Optional Chaining">Optional Chaining</a></li><li><a href=#optional-binding aria-label="Optional Binding">Optional Binding</a></li></ul></li><li><a href=#tuple aria-label=Tuple>Tuple</a></li><li><a href=#function--method--closure aria-label="Function & Method & Closure">Function & Method & Closure</a></li><li><a href=#protocol aria-label=Protocol>Protocol</a></li><li><a href=#extension aria-label=Extension>Extension</a></li><li><a href=#access-control aria-label="Access Control">Access Control</a></li><li><a href=#ecosystem aria-label=Ecosystem>Ecosystem</a></li><li><a href=#reference aria-label=Reference>Reference</a></li></ul></div></details></div><div class=post-content><p>簡單記錄 Apple 官方 Swift Guide 的重點與心得。</p><p><em>（撰於 2017-02-06，基於 Swift 3.1）</em></p><hr><h1 id=declaration>Declaration<a hidden class=anchor aria-hidden=true href=#declaration>#</a></h1><p>宣告變數使用 <code>var</code>，宣告常數使用 <code>let</code></p><ul><li>使用 <code>var</code> 宣告，該值為 mutable</li><li>使用 <code>let</code> 宣告，該值為 immutable</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>let</span> myConst = <span style=color:#e6db74>&#34;constant&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>var</span> myVar = <span style=color:#ae81ff>1234</span>
</span></span><span style=display:flex><span>myVar = <span style=color:#ae81ff>5678</span>
</span></span></code></pre></div><blockquote><p>慣例是都先使用 <code>let</code> 宣告，等到之後需求或 compiler 報錯時，再修正為 mutable 的 <code>var</code></p></blockquote><h2 id=type-inference>Type Inference<a hidden class=anchor aria-hidden=true href=#type-inference>#</a></h2><p>自動透過賦予的值推斷型別，也可以顯式聲明型別。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>let</span> doubleValue = <span style=color:#ae81ff>70.0</span> <span style=color:#75715e>// Double type</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> myStr: String
</span></span><span style=display:flex><span>myStr = <span style=color:#e6db74>&#34;1234&#34;</span>
</span></span></code></pre></div><h2 id=type-safety>Type Safety<a hidden class=anchor aria-hidden=true href=#type-safety>#</a></h2><p>Swift 是一個非常嚴謹的語言，注重型別安全（Type Safety）</p><ul><li>宣告常數、變數時必須賦值或聲明顯示型別</li><li>常數、變數使用前必須給定初始值</li><li>型別無法任意轉換，必須顯式指定型別轉換。</li></ul><h1 id=fundamental-data-type>Fundamental data type<a hidden class=anchor aria-hidden=true href=#fundamental-data-type>#</a></h1><p>Swift Standard Library 定義了許多基本型別：</p><h2 id=integerunsigned-integer-double-float>Integer/Unsigned Integer, Double, Float<a hidden class=anchor aria-hidden=true href=#integerunsigned-integer-double-float>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>let</span> myInt = <span style=color:#ae81ff>1234</span> <span style=color:#75715e>// integer</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> myInt8: Int8 = <span style=color:#ae81ff>1234</span> <span style=color:#75715e>// 8-bit integer</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> myUInt: UInt = <span style=color:#ae81ff>1234</span> <span style=color:#75715e>// unsigned integer</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> myDouble = <span style=color:#ae81ff>1234.0</span> <span style=color:#75715e>// double</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> anotherDouble: Double = <span style=color:#ae81ff>123</span> <span style=color:#75715e>// double</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> myFloat: Float = <span style=color:#ae81ff>123.0</span>
</span></span></code></pre></div><h2 id=boolean>Boolean<a hidden class=anchor aria-hidden=true href=#boolean>#</a></h2><p>布林值不再用 <code>YES</code> <code>NO</code>，改為 <code>true</code> <code>false</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>let</span> myBoolean = <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> myFalse: Bool = <span style=color:#66d9ef>false</span>
</span></span></code></pre></div><h2 id=string>String<a hidden class=anchor aria-hidden=true href=#string>#</a></h2><p>是字元集合（但非 Array 這種 collection type）</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>let</span> myStr = <span style=color:#e6db74>&#34;hello, world&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> anotherStr: String = <span style=color:#e6db74>&#34;hello, swift&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>print(myStr.hasPrefix(<span style=color:#960050;background-color:#1e0010>&#39;</span>hello<span style=color:#960050;background-color:#1e0010>&#39;</span>))
</span></span><span style=display:flex><span><span style=color:#75715e>// true</span>
</span></span></code></pre></div><blockquote><p>Swift 字串不僅是簡單的字元集合，有許多針對 Unicode support 與 橋接 NSString 的設計，但由於不太方便調用，預計 <a href=https://github.com/apple/swift/blob/master/docs/StringManifesto.md>Swift 4 會大幅修正</a></p></blockquote><h2 id=arraydictionary>Array/Dictionary<a hidden class=anchor aria-hidden=true href=#arraydictionary>#</a></h2><p>最常用的兩種 collection type，字面量使用 <code>[]</code> 將值包裹，<code>Dictionary</code> 使用 <code>key: value</code> 表示。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>var</span> array = [<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>3</span>, <span style=color:#ae81ff>4</span>]
</span></span><span style=display:flex><span>print(array[<span style=color:#ae81ff>2</span>]) <span style=color:#75715e>// 2</span>
</span></span><span style=display:flex><span>array[<span style=color:#ae81ff>2</span>] = <span style=color:#ae81ff>3</span>
</span></span><span style=display:flex><span>print(array[<span style=color:#ae81ff>2</span>]) <span style=color:#75715e>// 3</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>var</span> dict = [<span style=color:#e6db74>&#34;A&#34;</span>: <span style=color:#ae81ff>1</span>, <span style=color:#e6db74>&#34;B&#34;</span>: <span style=color:#ae81ff>2</span>]
</span></span><span style=display:flex><span>print(dict[<span style=color:#e6db74>&#34;A&#34;</span>]) <span style=color:#75715e>// 1</span>
</span></span><span style=display:flex><span>dict[<span style=color:#e6db74>&#34;A&#34;</span>] = <span style=color:#ae81ff>5</span>
</span></span><span style=display:flex><span>print(dict[<span style=color:#e6db74>&#34;A&#34;</span>]) <span style=color:#75715e>// 5</span>
</span></span></code></pre></div><blockquote><p>除了這些基本型別，<code>import Foundation</code> 後也可以使用諸如 <code>NSString</code>、<code>NSArray</code> 這類 Foundation Object。不過 Swift 與 Objective-C 橋接做得很好，建議能用 Stdlib 解決就不要用 Foundation Object。</p></blockquote><h1 id=operator>Operator<a hidden class=anchor aria-hidden=true href=#operator>#</a></h1><p>Swift 的 運算子大多都與 C/Objective-C 雷同。
值得一提的是，所有運算子都是在 standard library 中以 function 的形式宣告。</p><blockquote><p><code>i++</code> <code>++i</code> 這種 prefix/postfix increment 在 Swift 3 之後完全移除了</p></blockquote><h2 id=-operator><code>===</code> operator<a hidden class=anchor aria-hidden=true href=#-operator>#</a></h2><p>Swift 中新增的運算子，用來比較 reference type 指向的實例（比較 memory address）是否相同。功能等同 Objective-C 的 <code>[NSObject isEqual:]</code>。</p><h2 id=type-checkingcasting>Type checking/casting<a hidden class=anchor aria-hidden=true href=#type-checkingcasting>#</a></h2><ul><li>is：檢查實例是否為特定子類別</li><li>as：將實例轉型為其他相關子類別<ul><li>as?：轉型失敗回傳 nil</li><li>as!：強迫轉型（不建議使用）</li></ul></li><li>as 也可以和 value-binding 搭配服用</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>let</span> myInt: Int = <span style=color:#ae81ff>10</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>myInt <span style=color:#66d9ef>is</span> Int <span style=color:#75715e>// true</span>
</span></span><span style=display:flex><span>myInt <span style=color:#66d9ef>as</span>? String <span style=color:#75715e>// nil</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// value-binding 搶先看 -----------</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>testType</span>(<span style=color:#66d9ef>_</span> variable: Any) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>switch</span> variable {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>case</span> <span style=color:#66d9ef>let</span> variable <span style=color:#66d9ef>as</span> Double:
</span></span><span style=display:flex><span>        print(<span style=color:#e6db74>&#34;Double </span><span style=color:#e6db74>\(</span>variable<span style=color:#e6db74>)</span><span style=color:#e6db74>&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>case</span> <span style=color:#66d9ef>let</span> variable <span style=color:#66d9ef>as</span> Int:
</span></span><span style=display:flex><span>        print(<span style=color:#e6db74>&#34;Int </span><span style=color:#e6db74>\(</span>variable<span style=color:#e6db74>)</span><span style=color:#e6db74>&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>case</span> <span style=color:#66d9ef>let</span> variable <span style=color:#66d9ef>as</span> String:
</span></span><span style=display:flex><span>        print(<span style=color:#e6db74>&#34;String </span><span style=color:#e6db74>\(</span>variable<span style=color:#e6db74>)</span><span style=color:#e6db74>&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>default</span>:
</span></span><span style=display:flex><span>        print(<span style=color:#e6db74>&#34;Unknown Type&#34;</span>)
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> a: Any = <span style=color:#ae81ff>10</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> b: Any = String(<span style=color:#ae81ff>10</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> c: Array = [<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>3</span>, <span style=color:#ae81ff>4</span>]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>testType(a)
</span></span><span style=display:flex><span>testType(b)
</span></span><span style=display:flex><span>testType(c)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Int 10</span>
</span></span><span style=display:flex><span><span style=color:#75715e>// String 10</span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Unknown Type</span>
</span></span></code></pre></div><h1 id=control-flow>Control Flow<a hidden class=anchor aria-hidden=true href=#control-flow>#</a></h1><p>與 C/Objective-C 的共通點：</p><ul><li>大多數寫法類似</li><li>statements 內宣告的變數生命週期只在該 code block 內，不污染 outer scope</li></ul><h2 id=ifelse>if/else<a hidden class=anchor aria-hidden=true href=#ifelse>#</a></h2><ul><li>condition 可省略 <code>()</code>（主流 coding style 會省略）</li><li>無論 statement 有幾行，都一定要用 <code>{}</code> 包裹起來。</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>let</span> a = <span style=color:#ae81ff>6</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> (a <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>5</span>) print(a) <span style=color:#75715e>// compile error</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> a <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>5</span> { print(a) }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> a <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>5</span> {
</span></span><span style=display:flex><span>  <span style=color:#75715e>// true go here</span>
</span></span><span style=display:flex><span>} <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>  <span style=color:#75715e>// false go here</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=for>for<a hidden class=anchor aria-hidden=true href=#for>#</a></h2><ul><li>使用 <code>for ... in</code> 的寫法</li><li>condition <strong>不可以加上</strong> <code>()</code></li><li>無論 statement 有幾行，都一定要用 <code>{}</code> 包裹起來。</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>let</span> abcd = [<span style=color:#e6db74>&#34;A&#34;</span>, <span style=color:#e6db74>&#34;B&#34;</span>, <span style=color:#e6db74>&#34;C&#34;</span>, <span style=color:#e6db74>&#34;D&#34;</span>]
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> i <span style=color:#66d9ef>in</span> abcd {
</span></span><span style=display:flex><span>  print(i)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Swift 3 後，無法使用傳統 C style for loop <code>for (int i = 0; i &lt; 5; i++)</code>，若需取得 index，可以：</p><ul><li>使用 <code>enumerated</code> 方法。</li><li>使用 <code>Range Operator</code> 產生 <code>Range</code> Object (不推薦，容易 out of range)</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>let</span> abcd = [<span style=color:#e6db74>&#34;A&#34;</span>, <span style=color:#e6db74>&#34;B&#34;</span>, <span style=color:#e6db74>&#34;C&#34;</span>, <span style=color:#e6db74>&#34;D&#34;</span>]
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> (idx, val) <span style=color:#66d9ef>in</span> abcd.enumerated() {
</span></span><span style=display:flex><span>  print(idx, val)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> val <span style=color:#66d9ef>in</span> <span style=color:#ae81ff>0.</span>.&lt;abcd.count {
</span></span><span style=display:flex><span>    print(val)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=whilerepeat-while>while/repeat-while<a hidden class=anchor aria-hidden=true href=#whilerepeat-while>#</a></h2><ul><li>condition 可省略 <code>()</code>（主流 coding style 會省略）</li><li>無論 statement 有幾行，都一定要用 <code>{}</code> 包裹起來。</li></ul><blockquote><p><code>repeat...while</code> 等同於 C 的 <code>do...while</code></p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>var</span> i = <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>while</span> i <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>5</span> {
</span></span><span style=display:flex><span>  print(i)
</span></span><span style=display:flex><span>  i <span style=color:#f92672>+=</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>i = <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>repeat</span> {
</span></span><span style=display:flex><span>  print(i)
</span></span><span style=display:flex><span>  i <span style=color:#f92672>+=</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>} <span style=color:#66d9ef>while</span> i <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>5</span>
</span></span></code></pre></div><h2 id=switch>switch<a hidden class=anchor aria-hidden=true href=#switch>#</a></h2><ul><li>condition 可省略 <code>()</code>（主流 coding style 會省略）</li><li>可以比對許多不同的型別，不限制於 character 或 integer</li><li>預設每個 case 會自動 break，不需加上 <code>break</code></li><li>case statements 不需要加上 <code>{}</code></li><li>如不加 <code>default</code> case，<strong>需枚舉所有 case</strong>，否則 compiler 會 murmur</li><li>如需 C style 的 statements fall through，請加 <code>fallthrough</code></li><li>配合 <strong>pattern matching</strong> 可以玩很多花樣</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>let</span> number = <span style=color:#e6db74>&#34;A&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>switch</span> aString {
</span></span><span style=display:flex><span><span style=color:#66d9ef>case</span> <span style=color:#e6db74>&#34;A&#34;</span>:
</span></span><span style=display:flex><span>  print(<span style=color:#e6db74>&#34;Got&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>case</span> <span style=color:#e6db74>&#34;B&#34;</span>:
</span></span><span style=display:flex><span>  print(<span style=color:#e6db74>&#34;Got B&#34;</span>)
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>fallthrough</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>default</span>:
</span></span><span style=display:flex><span>  print(<span style=color:#e6db74>&#34;Got B with fallthrough&#34;</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Pattern matching 搶先看（with value-binding）</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>let</span> point = (<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>switch</span> point {
</span></span><span style=display:flex><span><span style=color:#66d9ef>case</span> (<span style=color:#66d9ef>_</span>, <span style=color:#ae81ff>0</span>):
</span></span><span style=display:flex><span>  print(<span style=color:#e6db74>&#34;on x axis&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>case</span> (<span style=color:#ae81ff>0</span>, <span style=color:#66d9ef>_</span>):
</span></span><span style=display:flex><span>  print(<span style=color:#e6db74>&#34;on y axis&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>case</span> (<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>):
</span></span><span style=display:flex><span>  print(<span style=color:#e6db74>&#34;at origin&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>case</span> <span style=color:#66d9ef>let</span> (x, y):
</span></span><span style=display:flex><span>  print(<span style=color:#e6db74>&#34;point at (</span><span style=color:#e6db74>\(</span>x<span style=color:#e6db74>)</span><span style=color:#e6db74>, </span><span style=color:#e6db74>\(</span>y<span style=color:#e6db74>)</span><span style=color:#e6db74>)&#34;</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=guard-else>guard-else<a hidden class=anchor aria-hidden=true href=#guard-else>#</a></h2><ul><li>用途：檢查是否符合 requirement，用於 Early Exit（作用類似 <code>if (!...) return</code>）</li><li>guard 的 condition 為 requirement，與 <code>if</code> 相反</li><li>須與 <code>else</code> 搭配，該 <code>else</code> 內必須有轉換 control flow 的動作，如 <code>break</code>、<code>return</code>等</li><li>與 optional binding 搭配，可以節省寶貴的 indentation</li><li>慣例寫在該 code block 的最頂層</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>let</span> aNil: Int? = <span style=color:#ae81ff>5</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>guard</span> <span style=color:#66d9ef>true</span> <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>  fatalError(<span style=color:#e6db74>&#34;you won&#39;t fail here&#34;</span>)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// optional-binding</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>guard</span> <span style=color:#66d9ef>let</span> integer = aNil <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>  fatalError(<span style=color:#e6db74>&#34;you won&#39;t fail here&#34;</span>)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>print(integer) <span style=color:#75715e>// no need to wrap the optional</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>guard</span> int <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>5</span> <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>  fatalError(<span style=color:#e6db74>&#34;you failed&#34;</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><blockquote><p>由於 <code>guard</code> 關鍵字用在 Early exit，<code>else</code> clause 裡不應有太複雜的邏輯</p></blockquote><h2 id=defer>defer<a hidden class=anchor aria-hidden=true href=#defer>#</a></h2><ul><li>用途：在該 code block 返回之前，執行 <code>defer</code> 的動作</li><li>若有多個 <code>defer</code>，以相反方向執行（由下而上）</li><li>類似其他語言 try-catch-finally 的 finally</li><li>慣例寫在該 code block 的最頂層</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>f</span>() {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>defer</span> { print(<span style=color:#e6db74>&#34;Last&#34;</span>) }
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>defer</span> { print(<span style=color:#e6db74>&#34;Third&#34;</span>) }
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>defer</span> { print(<span style=color:#e6db74>&#34;Second&#34;</span>) }
</span></span><span style=display:flex><span>  print(<span style=color:#e6db74>&#34;First&#34;</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><blockquote><p>個人認為 <code>defer</code> 本身執行順序相反，比較不推薦使用多個 defer，會減少 readability</p></blockquote><h1 id=type-system>Type system<a hidden class=anchor aria-hidden=true href=#type-system>#</a></h1><p>Swift 除了 builtin types 以外，還有許多方式可以宣告 custom type，介紹常見的幾種</p><ul><li>value types<ul><li>enum</li><li>struct</li></ul></li><li>reference types<ul><li>class</li><li>function</li></ul></li><li>others<ul><li>tuple</li><li>protocol</li><li>extension</li></ul></li></ul><p>Swift 中，struct、enum、function 皆與 class 一樣是 <a href=https://en.wikipedia.org/wiki/First-class_citizen>first-class citizen</a>，可以賦值、 作為 function 參數或 function 的返回值。</p><h2 id=value-type-vs-reference-type>Value Type V.S. Reference Type<a hidden class=anchor aria-hidden=true href=#value-type-vs-reference-type>#</a></h2><p>Swift 的世界中，把 type 分為 value type 與 reference type，和 Objective-C 萬物皆繼承 <code>NSObject</code> 很不一樣。</p><table><thead><tr><th>Behavior</th><th>Value Type</th><th>Reference Type</th></tr></thead><tbody><tr><td>copy</td><td>複製一份 copy</td><td>分享同一份 value（複製新的reference）</td></tr><tr><td>function call</td><td>call by value</td><td>call by reference</td></tr><tr><td>修改屬性的method</td><td>inhibited (func 需用 mutating 修飾）</td><td>allowed</td></tr></tbody></table><p>簡而言之 value type 賦值到新的 variable 時，會複製整個實例；reference type 則只會指向同一個實例。</p><p>如果 value type 的 method 需要改變自己的 property 時，該 method 需要使用 <code>mutating</code> 修飾。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#75715e>// Value Type ----------</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> array1 = [<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>3</span>]
</span></span><span style=display:flex><span><span style=color:#66d9ef>var</span> array2 =  array1
</span></span><span style=display:flex><span>array2[<span style=color:#ae81ff>0</span>] = <span style=color:#ae81ff>4</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>print(array1) <span style=color:#75715e>// still the same value</span>
</span></span><span style=display:flex><span><span style=color:#75715e>// [1, 2, 3]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>print(array2) <span style=color:#75715e>// copied and modified</span>
</span></span><span style=display:flex><span><span style=color:#75715e>// [4, 2, 3]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Reference Type -------</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>MyClass</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>var</span> prop = <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> instance1 = MyClass()
</span></span><span style=display:flex><span><span style=color:#66d9ef>var</span> instance2 = instance1 <span style=color:#75715e>// a new reference to instance1</span>
</span></span><span style=display:flex><span>instance2.prop = <span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>print(instance1)
</span></span><span style=display:flex><span><span style=color:#75715e>// 2</span>
</span></span><span style=display:flex><span>print(instance2)
</span></span><span style=display:flex><span><span style=color:#75715e>// 2</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>print(instance1 === instance2)
</span></span><span style=display:flex><span><span style=color:#75715e>// true</span>
</span></span></code></pre></div><p>慣例上，在需求允許的情況，推薦使用 value type（struct、enum）創建新的型別，在 assign/copy 時不會造成太多 side effect。例如在與 database 溝通等 object mapping 的情境下。</p><blockquote><p>小提醒：Stdlib 的 Array/Dictionary 皆為 value type</p></blockquote><h1 id=class>Class<a hidden class=anchor aria-hidden=true href=#class>#</a></h1><h2 id=declaration-1>Declaration<a hidden class=anchor aria-hidden=true href=#declaration-1>#</a></h2><p>class 的宣告方式和大多數程式語言相似</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>MyClass</span> {
</span></span><span style=display:flex><span>  <span style=color:#75715e>// ...</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>繼承其他 class 或 protocol 則在 classname 後加上 <code>: MySuperClass</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>MySubClass</span>: MyClass {
</span></span><span style=display:flex><span>  <span style=color:#75715e>// ...</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Swift 的 class 依然不允許多重繼承，但可以繼承多個 <strong>protocol</strong>，以 <code>,</code> 分隔不同的繼承來源。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>AnotherSubClass</span>: MyClass, MyProtocol, AnotherProtocol {
</span></span><span style=display:flex><span>  <span style=color:#75715e>// ...</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=properties>Properties<a hidden class=anchor aria-hidden=true href=#properties>#</a></h2><p>class 的 property 分為兩種</p><ul><li>Stored Property</li><li>Computed Property</li></ul><h3 id=stored-property>Stored Property<a hidden class=anchor aria-hidden=true href=#stored-property>#</a></h3><p>getter／setter 就是 property 本身</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Rect</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>var</span> width = <span style=color:#ae81ff>10</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>var</span> height = <span style=color:#ae81ff>20</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> rect = Rect()
</span></span><span style=display:flex><span>rect.width = <span style=color:#ae81ff>20</span>
</span></span><span style=display:flex><span>print(rect.width)
</span></span></code></pre></div><h3 id=computed-property>Computed Property<a hidden class=anchor aria-hidden=true href=#computed-property>#</a></h3><ul><li>getter／setter 透過計算得來</li><li>setter 透過 <code>newValue</code> 變數取得新值</li><li>只有 getter 時，可以直接 return 該值（Objective-C readonly property）</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Rect</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>var</span> width = <span style=color:#ae81ff>10</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>var</span> height = <span style=color:#ae81ff>20</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>var</span> x = <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>var</span> y = <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>var</span> centerX: Int {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>get</span> {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>return</span> x <span style=color:#f92672>+</span> width <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>set</span> {
</span></span><span style=display:flex><span>      x = newValue <span style=color:#f92672>-</span> width <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>var</span> area: Int { <span style=color:#75715e>// readonly</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> width <span style=color:#f92672>*</span> height
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=property-observers>Property Observers<a hidden class=anchor aria-hidden=true href=#property-observers>#</a></h3><ul><li>property willSet/didSet 時做對應的動作</li><li>可取代部分 Objective-C 的 key-value Observing 的功能</li><li>willSet 可以從 <code>newValue</code> 變數取得新值</li><li>didSet 可以從 <code>oldValue</code> 變數取得舊值</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>PropObserve</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>var</span> aVar: Int = <span style=color:#ae81ff>0</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>willSet</span> {
</span></span><span style=display:flex><span>      print(<span style=color:#e6db74>&#34;New Value: </span><span style=color:#e6db74>\(</span>newValue<span style=color:#e6db74>)</span><span style=color:#e6db74>&#34;</span>)
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>didSet</span> {
</span></span><span style=display:flex><span>      print(<span style=color:#e6db74>&#34;Old Value: </span><span style=color:#e6db74>\(</span>oldValue<span style=color:#e6db74>)</span><span style=color:#e6db74>&#34;</span>)
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=initialization>Initialization<a hidden class=anchor aria-hidden=true href=#initialization>#</a></h2><ul><li>Designated initializer： 完全初始化所有 stored property 的 initializer</li><li>Designated initializer： 皆須調用 superclass 的 designated initializer</li><li>Convenience initiailzer： 用 <code>convenience</code> 修飾，必須調用其他 initializer</li><li><code>convenience</code> init chain 的最末一個必須調用 self 的 designated initializer</li><li>利用 <code>required</code> 修飾詞來指定 subclass 必須實作的 initializer</li><li>底層與 Objective-C 同為 Two-Phase Initialization，但會賦予 stored property 實值而非 <code>nil</code></li><li>subclasses 在滿足下列條件之一，就會自動繼承 superclass 的 initis（<strong>預設不繼承</strong>）：<ol><li>subclass 沒有宣告任何 init -> 自動繼承所有 <strong>designated init</strong></li><li>subclass 實作所有 superclass 的 designated inits -> 自動繼承所有 <strong>convenience init</strong></li></ol></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>MyClass</span>: CustomStringConvertible {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> a: Int
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> b: Int
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> description: String {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>\(</span>a<span style=color:#e6db74>)</span><span style=color:#e6db74>, </span><span style=color:#e6db74>\(</span>b<span style=color:#e6db74>)</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>init</span>(a: Int, b: Int) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>self</span>.a = a
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>self</span>.b = b
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>required</span> <span style=color:#66d9ef>init</span>(a: Int, b: Int, c: Int) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>self</span>.a = a <span style=color:#f92672>*</span> <span style=color:#ae81ff>5</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>self</span>.b = b <span style=color:#f92672>*</span> c
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>convenience</span> <span style=color:#66d9ef>init</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>self</span>.<span style=color:#66d9ef>init</span>(a: <span style=color:#ae81ff>0</span>, b: <span style=color:#ae81ff>0</span>)
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>SubClass</span>: MyClass {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>override</span> <span style=color:#66d9ef>init</span>(a: Int, b: Int) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>super</span>.<span style=color:#66d9ef>init</span>(a: a, b: b)
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>required</span> <span style=color:#66d9ef>init</span>(a: Int, b: Int, c: Int) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>super</span>.<span style=color:#66d9ef>init</span>(a: a, b: b)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>self</span>.a = <span style=color:#ae81ff>10</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>self</span>.b = <span style=color:#ae81ff>15</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> my = MyClass()
</span></span><span style=display:flex><span>print(<span style=color:#e6db74>&#34;my: </span><span style=color:#e6db74>\(</span>my<span style=color:#e6db74>)</span><span style=color:#e6db74>&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> my2 = MyClass(a: <span style=color:#ae81ff>1</span>, b: <span style=color:#ae81ff>2</span>, c: <span style=color:#ae81ff>3</span>)
</span></span><span style=display:flex><span>print(<span style=color:#e6db74>&#34;my2: </span><span style=color:#e6db74>\(</span>my2<span style=color:#e6db74>)</span><span style=color:#e6db74>&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> sub = SubClass()
</span></span><span style=display:flex><span>print(<span style=color:#e6db74>&#34;sub: </span><span style=color:#e6db74>\(</span>sub<span style=color:#e6db74>)</span><span style=color:#e6db74>&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> sub2 = SubClass(a: <span style=color:#ae81ff>1</span>, b: <span style=color:#ae81ff>2</span>, c: <span style=color:#ae81ff>3</span>)
</span></span><span style=display:flex><span>print(<span style=color:#e6db74>&#34;sub2: </span><span style=color:#e6db74>\(</span>sub2<span style=color:#e6db74>)</span><span style=color:#e6db74>&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> sub3 = SubClass(a: <span style=color:#ae81ff>1</span>, b: <span style=color:#ae81ff>2</span>)
</span></span><span style=display:flex><span>print(<span style=color:#e6db74>&#34;sub3: </span><span style=color:#e6db74>\(</span>sub3<span style=color:#e6db74>)</span><span style=color:#e6db74>&#34;</span>)
</span></span></code></pre></div><h1 id=struct>Struct<a hidden class=anchor aria-hidden=true href=#struct>#</a></h1><ul><li>和 class 相似，但為 value type，且無法繼承</li><li>Default Initializer 是 memberwise initializer（須賦值給所有 properties）</li><li>mutating method: 改變自身 property</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>Origin</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> x: Int
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> y: Int
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> origin = Origin(x: <span style=color:#ae81ff>0</span>, y: <span style=color:#ae81ff>1</span>) <span style=color:#75715e>// 提供 default init</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>Point</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> x: Int
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> y: Int
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>init</span>() {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>self</span>.x = <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>self</span>.y = <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>mutating</span> <span style=color:#66d9ef>func</span> <span style=color:#a6e22e>multiplyX</span>(x: Int) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>self</span>.x <span style=color:#f92672>*=</span> x
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> point = Point(x: <span style=color:#ae81ff>0</span>, y: <span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span><span style=color:#75715e>// Error： custom init 會取代 default memberwise init</span>
</span></span></code></pre></div><ul><li><strong>Extra</strong>: inherit <code>OptionSet</code> protocol for <code>NS_OPTIONS</code> (不是用 enum)</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>Direction</span>: OptionSet {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>let</span> rawValue: Int
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>init</span>(rawValue: Int) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>self</span>.rawValue = rawValue
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>let</span> north = Direction(rawValue: <span style=color:#ae81ff>1</span> <span style=color:#f92672>&lt;&lt;</span> <span style=color:#ae81ff>0</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>let</span> east = Direction(rawValue: <span style=color:#ae81ff>1</span> <span style=color:#f92672>&lt;&lt;</span> <span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>let</span> south = Direction(rawValue: <span style=color:#ae81ff>1</span> <span style=color:#f92672>&lt;&lt;</span> <span style=color:#ae81ff>2</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>let</span> west = Direction(rawValue: <span style=color:#ae81ff>1</span> <span style=color:#f92672>&lt;&lt;</span> <span style=color:#ae81ff>3</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>let</span> none: Direction = []
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>let</span> all: Direction = [.north, .east, .south, .west]
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> dir: Direction = [.north, .east]
</span></span></code></pre></div><h1 id=enum>Enum<a hidden class=anchor aria-hidden=true href=#enum>#</a></h1><ul><li>不需指定 rawValue</li><li>每個 case 都是被定義好的類型，不需害怕比對到 <code>0</code>（legacy Objective-C NS_ENUM issue）</li><li>mutating method: 改變自身 properties 的值</li><li>很容易與 <code>switch</code> 配合</li><li>Advance：可以宣告 indirect enum (recursive enum)</li></ul><h1 id=optional>Optional<a hidden class=anchor aria-hidden=true href=#optional>#</a></h1><p>Swift 中很神奇的 Optional，實際上就只是一個 enum，實作上大概長這樣</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>enum</span> <span style=color:#a6e22e>Optional</span>&lt;Wrapped&gt; {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>case</span> <span style=color:#66d9ef>none</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>case</span> some(Wrapped)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=unwrapping>Unwrapping<a hidden class=anchor aria-hidden=true href=#unwrapping>#</a></h2><ul><li>forced unwrapped：強迫解析／取值（不建議使用）</li><li>implicit wrapped：自動解析／取值（Apple 官方用在 xib／storyboard 的 IBOutlet property）</li><li>Nil-coalescing: 提供 Optional 一個 default value</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>let</span> a: Int? = <span style=color:#ae81ff>10</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> b: Int! = <span style=color:#ae81ff>10</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>print(a!)                 <span style=color:#75715e>// print 需傳入非 optional 的型別，必須強迫解析</span>
</span></span><span style=display:flex><span>print(a ?? <span style=color:#e6db74>&#34;This is nil&#34;</span>) <span style=color:#75715e>// a 若是 nil 則 print 出 &#34;This is nil&#34;</span>
</span></span><span style=display:flex><span>print(b)                  <span style=color:#75715e>// b 已自動解析（不建議使用，除非完全確定不會取得 nil）</span>
</span></span></code></pre></div><h2 id=optional-chaining>Optional Chaining<a hidden class=anchor aria-hidden=true href=#optional-chaining>#</a></h2><ul><li>在 optional 後加上 <code>?</code>，遇到 <code>nil</code> 停止，不會 crash（類似 Objective-C 對 nil msgSend）</li><li>可以 chaining protocol 的 optional method，不需要 <code>respondToSelector:</code> 檢查</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>let</span> array: [Int]? = [<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>3</span>]
</span></span><span style=display:flex><span>print(array?.count)
</span></span><span style=display:flex><span><span style=color:#75715e>// 3</span>
</span></span></code></pre></div><h2 id=optional-binding>Optional Binding<a hidden class=anchor aria-hidden=true href=#optional-binding>#</a></h2><ul><li>解析 optional 中的 value，有值則將其 binding 到 variable 上，不需再解析</li><li><code>if let</code></li><li><code>case let</code></li><li><code>guard let</code></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>let</span> x: Int? = <span style=color:#ae81ff>1000</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#66d9ef>let</span> x = x {
</span></span><span style=display:flex><span>  print(x) <span style=color:#75715e>// no need to unwrap</span>
</span></span><span style=display:flex><span>} <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>  <span style=color:#75715e>// if x == nil goes here</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> x <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>  print(x!) <span style=color:#75715e>// Need a forced unwrapping. Unsafe.</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h1 id=tuple>Tuple<a hidden class=anchor aria-hidden=true href=#tuple>#</a></h1><ul><li>輕巧的 container，除了儲存 value，沒有其他功能</li><li>tuple elements 可以有 name</li><li>tuple elements 可以是不同型別</li><li>function 可利用 tuple 產生多個 return value</li><li>可與強大 pattern matching 配合</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>let</span> voidTuple = ()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> tuple = (<span style=color:#ae81ff>1</span>, <span style=color:#e6db74>&#34;A&#34;</span>)
</span></span><span style=display:flex><span>print(tuple.<span style=color:#ae81ff>0</span>, tuple.<span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span><span style=color:#75715e>// 1 A</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> namedTuple = (a: <span style=color:#e6db74>&#34;a&#34;</span>, b: <span style=color:#e6db74>&#34;b&#34;</span>, <span style=color:#e6db74>&#34;c&#34;</span>)
</span></span><span style=display:flex><span>print(namedTuple.a, namedTuple.b, namedTuple.<span style=color:#ae81ff>2</span>, namedTuple.<span style=color:#ae81ff>0</span>)
</span></span><span style=display:flex><span><span style=color:#75715e>// a b c a</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>let</span> point = (<span style=color:#ae81ff>3</span>, <span style=color:#ae81ff>5</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>switch</span> point {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>case</span> (<span style=color:#66d9ef>_</span>, <span style=color:#ae81ff>0</span>):
</span></span><span style=display:flex><span>    print(<span style=color:#e6db74>&#34;on the x axis&#34;</span>)
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>case</span> (<span style=color:#ae81ff>0</span>, <span style=color:#66d9ef>_</span>):
</span></span><span style=display:flex><span>    print(<span style=color:#e6db74>&#34;on the y axis&#34;</span>)
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>case</span> (<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>):
</span></span><span style=display:flex><span>    print(<span style=color:#e6db74>&#34;at origin&#34;</span>)
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>case</span> <span style=color:#66d9ef>let</span> (x, y): <span style=color:#75715e>// value-binding</span>
</span></span><span style=display:flex><span>    print(<span style=color:#e6db74>&#34;at (</span><span style=color:#e6db74>\(</span>x<span style=color:#e6db74>)</span><span style=color:#e6db74>, </span><span style=color:#e6db74>\(</span>y<span style=color:#e6db74>)</span><span style=color:#e6db74>)&#34;</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h1 id=function--method--closure>Function & Method & Closure<a hidden class=anchor aria-hidden=true href=#function--method--closure>#</a></h1><ul><li>皆是 reference type，型別為 parameter types + return type，類似 method signature。</li><li>closure 可以利用 capture list 獲取外部變數，防止 retain cycle</li><li>escaping closure：作為參數傳遞時，會延遲至 function return 後執行，逃出 function scope</li><li>預設 closure 作為 parameter 時為 @noescaing，escaping closure 需以 @escaping 特別修飾</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#75715e>// function witn 0 param, return an Int</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>function1</span>() -&gt; Int {
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// function with 2 params, return a closure with 1 param and return a String</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>function2</span>(x: Double, y: String) -&gt; (Int) -&gt; (String) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> { Int <span style=color:#66d9ef>in</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;a string&#34;</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// closure with 2 params, no return value</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> closure1 = { (a: Int, b: Int) <span style=color:#66d9ef>in</span>
</span></span><span style=display:flex><span>    print(a, b)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// closure with explicit type declaration (implicit return &amp; shorthand argument)</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> closure2: (String, String) -&gt; ([String: String]) = { [$0: $1] }
</span></span></code></pre></div><h1 id=protocol>Protocol<a hidden class=anchor aria-hidden=true href=#protocol>#</a></h1><ul><li>與 Objective-C 的 protocol 雷同</li><li>可以透過 <code>@objc optional</code> 修飾為 optional 的 requirement</li><li>可繼承，也可透過 extension 提供 default implementations</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>protocol</span> <span style=color:#a6e22e>Car</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> tireCount: Int { <span style=color:#66d9ef>get</span> <span style=color:#66d9ef>set</span> }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> isDriving: Bool { <span style=color:#66d9ef>get</span> }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>func</span> <span style=color:#a6e22e>drive</span>()
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Optional 需要 import Foundation 才能利用 Objective-C 的 runtime 特性</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>Foundation</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>@objc</span> <span style=color:#66d9ef>protocol</span> <span style=color:#a6e22e>Flyable</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>func</span> <span style=color:#a6e22e>fly</span>()
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>@objc</span> <span style=color:#66d9ef>optional</span> <span style=color:#66d9ef>func</span> <span style=color:#a6e22e>landing</span>()
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h1 id=extension>Extension<a hidden class=anchor aria-hidden=true href=#extension>#</a></h1><ul><li>class/struct/enum 皆可宣告 extension</li><li>protocol 的 extension 為該 protocol 的 default implementations</li><li>同一個 type 可以有多個 extesions</li><li>extension 可以使用 <code>where</code> 來限制 extension 的範圍</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>UIKIt</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>protocol</span> <span style=color:#a6e22e>SomeViewProtocol</span> {}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>extension</span> <span style=color:#a6e22e>SomeViewProtocol</span> <span style=color:#66d9ef>where</span> <span style=color:#66d9ef>Self</span>: UIButton {
</span></span><span style=display:flex><span>  <span style=color:#75715e>// 作用在 UIButton 的 default implementations</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>extension</span> <span style=color:#a6e22e>SomeViewProtocol</span> <span style=color:#66d9ef>where</span> <span style=color:#66d9ef>Self</span>: UILabel {
</span></span><span style=display:flex><span>  <span style=color:#75715e>// 作用在 UILabel 的 default implementations</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h1 id=access-control>Access Control<a hidden class=anchor aria-hidden=true href=#access-control>#</a></h1><ul><li>open/public: 公開</li><li>internal: 模組層（預設的 ACL）</li><li>fileprivate: 文件層</li><li>private: 宣告層（class／struct 內部等）</li><li>patial access control: setter 需要較高權限時（外部 readonly）<ul><li>internal(set)</li><li>fileprivate(set)</li><li>private(set)</li></ul></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>MyClass</span> {
</span></span><span style=display:flex><span>  open <span style=color:#66d9ef>func</span> <span style=color:#a6e22e>test</span>() {}
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>private</span>(<span style=color:#66d9ef>set</span>) <span style=color:#66d9ef>var</span> readonlyVar: Int = <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><blockquote><p>public 與 open 的差異在與 <strong>subclassable</strong>，open 可以在模組外 subclass，但 public 不能在模組外 subclass</p></blockquote><h1 id=ecosystem>Ecosystem<a hidden class=anchor aria-hidden=true href=#ecosystem>#</a></h1><ul><li><a href=https://github.com/realm/SwiftLint>SwiftLint</a>: Coding style linter written in Swift</li><li><a href=https://github.com/Carthage/Carthage>Carthage</a>: Package Manager written in Swift</li><li><a href=https://github.com/realm/jazzy>Jazzy</a>: Swift documentation generator (written in Ruby)</li><li><a href=https://github.com/matteocrippa/awesome-swift>Awesome-Swift</a>: curated list for Swift library/fraemwork</li><li>Server-side Swift<ul><li><a href=https://github.com/vapor/vapor>Vapor</a>: 最活躍的 web framework</li><li><a href=https://github.com/PerfectlySoft/Perfect>Perfect</a>: 最多 Star 的 web framework</li><li>&mldr;More</li></ul></li><li>functional/reactive programming<ul><li><a href=https://github.com/ReactiveX/RxSwift>RxSwift</a>: ReactiveX Community Support</li><li><a href=https://github.com/ReactiveCocoa/ReactiveCocoa>ReactiveCocoa</a>: Most Popular RX library</li></ul></li></ul><h1 id=reference>Reference<a hidden class=anchor aria-hidden=true href=#reference>#</a></h1><ul><li><a href=https://developer.apple.com/library/content/documentation/Swift/Conceptual/Swift_Programming_Language/>Apple Swift Documentation</a></li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=https://weihanglo.tw/tags/swift/>Swift</a></li></ul><nav class=paginav><a class=prev href=https://weihanglo.tw/posts/2017/carthage-intro/><span class=title>« Prev</span><br><span>Carthage 套件管理工具</span>
</a><a class=next href=https://weihanglo.tw/posts/2017/readthesource-swift-then/><span class=title>Next »</span><br><span>閱讀原始碼：Swift-Then</span></a></nav></footer></article></main><footer class=footer><span>CC BY-NC-SA 4.0</span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>