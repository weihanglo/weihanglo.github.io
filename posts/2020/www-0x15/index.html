<!doctype html><html lang=en dir=auto>
<head><meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=robots content="index, follow">
<title>WWW 0x15: 你懂資料庫嗎 | Life is a refactoring process without tests</title>
<meta name=keywords content="Databases">
<meta name=description content="這裡是 WWW 第貳拾壹期，Wow Weihang Weekly 是一個毫無章法的個人週刊，出刊週期極不固定，從一週到五年都有可能。初期內容以軟體工程為主，等財富自由後會有更多">
<meta name=author content>
<link rel=canonical href=https://weihanglo.tw/posts/2020/www-0x15/>
<link crossorigin=anonymous href=/assets/css/stylesheet.css rel="preload stylesheet" as=style>
<link rel=icon href=https://weihanglo.tw/favicon.ico>
<link rel=icon type=image/png sizes=16x16 href=https://weihanglo.tw/favicon-16x16.png>
<link rel=icon type=image/png sizes=32x32 href=https://weihanglo.tw/favicon-32x32.png>
<link rel=apple-touch-icon href=https://weihanglo.tw/apple-touch-icon.png>
<link rel=mask-icon href=https://weihanglo.tw/safari-pinned-tab.svg>
<meta name=theme-color content="#2e2e33">
<meta name=msapplication-TileColor content="#2e2e33">
<noscript>
<style>#theme-toggle,.top-link{display:none}</style>
<style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style>
</noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css integrity=sha384-MlJdn/WNKDGXveldHDdyRP1R4CTHr3FeuDNfhsLPYrq2t0UBkUdK2jyTnXPEK1NQ crossorigin=anonymous>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.js integrity=sha384-VQ8d8WVFw0yHhCk5E8I86oOhv48xLpnDZx5T9GogA/Y84DcCKWXDmSDfn13bzFZY crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/contrib/auto-render.min.js integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR crossorigin=anonymous></script>
<script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:'$$',right:'$$',display:!0},{left:'$',right:'$',display:!1},{left:'\\(',right:'\\)',display:!1},{left:'\\[',right:'\\]',display:!0}],throwOnError:!1})})</script>
<meta property="og:title" content="WWW 0x15: 你懂資料庫嗎">
<meta property="og:description" content="這裡是 WWW 第貳拾壹期，Wow Weihang Weekly 是一個毫無章法的個人週刊，出刊週期極不固定，從一週到五年都有可能。初期內容以軟體工程為主，等財富自由後會有更多">
<meta property="og:type" content="article">
<meta property="og:url" content="https://weihanglo.tw/posts/2020/www-0x15/"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2020-06-13T00:00:00+08:00">
<meta property="article:modified_time" content="2020-06-13T00:00:00+08:00">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="WWW 0x15: 你懂資料庫嗎">
<meta name=twitter:description content="這裡是 WWW 第貳拾壹期，Wow Weihang Weekly 是一個毫無章法的個人週刊，出刊週期極不固定，從一週到五年都有可能。初期內容以軟體工程為主，等財富自由後會有更多">
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://weihanglo.tw/posts/"},{"@type":"ListItem","position":3,"name":"WWW 0x15: 你懂資料庫嗎","item":"https://weihanglo.tw/posts/2020/www-0x15/"}]}</script>
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"WWW 0x15: 你懂資料庫嗎","name":"WWW 0x15: 你懂資料庫嗎","description":"這裡是 WWW 第貳拾壹期，Wow Weihang Weekly 是一個毫無章法的個人週刊，出刊週期極不固定，從一週到五年都有可能。初期內容以軟體工程為主，等財富自由後會有更多","keywords":["Databases"],"articleBody":"這裡是 WWW 第貳拾壹期，Wow Weihang Weekly 是一個毫無章法的個人週刊，出刊週期極不固定，從一週到五年都有可能。初期內容以軟體工程為主，等財富自由後會有更多雜食篇章。\nThe Best Medium-Hard Data Analyst SQL Interview Questions 作者總結自己的面試和工作經驗，整理出 Data Analyst 和 Data Scientist 的 SQL 面試題，著重在 self-join 和 window function 的相關練習。雖然 SQL 能力不是應徵資料分析職位的關鍵因子，我覺得反而是資訊工作者不可或缺的基本能力，從行銷、產品經理到工程師都應該要會 SQL DQL（Data Query Language），才能從報表、產品或系統看出洞見 。\nAnxiety in product development 本文透過幾個行為觀察，分析是否掉入 anxiety driven development 的無限迴圈，這裡來個超譯摘要：\n 害怕輸輸去： 怕失去市佔、怕失去顧客、跟著競爭對手的 feature 跑，導致產品開發看似 agile 其實更不穩定，總是晚一個世代，將創新扼殺在時間漩渦。 一心只想贏： Unique Selling Proposition（UCP）可以理解為產品在市場上的生態區位，可以說是「獨特賣點」，利用 UCP 是好事，但以價格創造的 UCP 最羸弱，最沒使用者忠誠，最容易被其他人宰割。 並非發光的都是金子： 著急業務落後者容易短視近利，這種短期勝利可能只是短暫消除焦慮感，卻讓整個團隊陷入愁雲慘霧，回饋感漸低，特別是在專案尾聲想偷渡 feature 而不是留 buffer。 掌舵： 主要是說退一步並勾勒出真實的展望，並以此影響策略，（對不起這已超出我能理解的範圍，請自行看原文） 不可能的承諾： 焦慮讓你想要找回掌控權？你會開始將流程官僚化，寫下每個 ticket 細節與需求，這反而嚴重打擊各位的動機。 脫離官僚： 信任帶來新幸福，信任你的市場研究和策略，信任你的團隊的專業和洞見，讓他們自行成為一個有機體。  Things I Wished More Developers Knew About Databases 世界上大多數的開發者都碰過資料庫，但其實對資料庫一知半解，常常各種掉資料或是 deadlock。來自 Google 的 @rakyll 列出一些和資料庫相關常見的誤解和經驗，其實每個主題都可以獨立寫篇文章，以下稍微摘要：\n **當 99.999% 的時間網路不構成問題時，恭喜！你很幸運： **網路非常不可靠，從硬體，拓撲到鯊魚咬電纜（台灣人早就知道會咬了），而且網路掌控在大型企業或雲端供應商手中，對開發者來說很難鑑定其錯誤。 一個 ACID，各自表述： 不是所有資料庫都符合 ACID，宣稱符合 ACID 的資料庫也不一定行為正確，這裡 MongoDB 的沒開 journal 60 秒才 fsync 一次的事件又被拿出來鞭屍，當然，最近 Jepsen 幹爆 MongoDB 4.2.6 的事件也可以關注一下。 每個資料庫能達成的一致性和隔離性程度不同： ACID 的 Consistency 和 Isolation 的光譜其實很廣，而且這兩個特性其實很貴，所以不同資料庫的 tradeoff 不盡相同，可以參考 Jepsen Consistency Model 還有各資料的 Isolation Level 大表看看你要什麼 不適用 exclusive lock 時，樂觀鎖是個選項： 樂觀鎖是一種在讀取 tuple 時先記錄 checksum/timestamp/version 資訊，寫入時再檢查 tuple 的這些資訊是否改變來決定寫入與否（但要注意 isolation level 和 dirty read 的關係，如果 write 太多可能樂觀鎖效能會較差） 除了 dirty read 和 data loss，還有更古怪的事： 前兩者可以透過注意鎖和 race condition 來避免，但 read/write skew 這種邏輯錯誤更難發覺。 我的資料庫和我在執行順序上無法總是達成共識： txn 的順序是依照接收到 txn 順序執行，而非 code 撰寫順序，如果有不同的操作需要保證順序，請包入同一個 txn。 application-level sharding 可以實作在應用層之外： 例如額外的 sharing service 處理這塊，application 還是處理商業邏輯就行，像 YouTube 底層的 Vitness ，或是 Shopee 底層的 TiDB 的底層 TiKV 都是箇中高手。  AUTOINCREMENT 有害論： 在分散式系統不易生成正確的 AUTOINCREMENT ID、當作 partition key 可能會產生 hotspot、有其他 unique key 是 AUTOINCREMENT key 就是廢物 資料雖過期但有用（而且是 lock-free）： MVCC 可以達到 Repeatable read isolation level，對 read-heavy app 或是 globally distributed app 能有效降低延遲。（代價就是偶爾要跑 GC 或 VACUUM） 時間會在不同來源間扭曲： 所有時間 API 都在說謊，就算用 NTP 服務還是有網路延遲。作者在這邊偷偷推銷 Google 的 TrueTime，但有趣的是 API 回傳是個 time range，當前時間就落在這個範圍中。 我都把「延遲」念「延遲」： latency 在不同領域意義不同，client latency = database latency + network latency，服用前請看說明書。 評估效能該考慮 per transaction 等場景的需求： 幫自家資料庫打廣告時不能只著重在 read/write throughput，應還要設計不同的場景、constraint、transaction 才能，脫離應用場景的 benchmark 都是流氓。 nested transaction 有害論： nested txn 會導致非預期的行為，例如 如果 inner txn 錯誤 rollback，那 outer txn 該 rollback 嗎？如果是開發 request-response 的 web app，我自己會傾向一個 request-response 就是一個 txn。 transaction 不該管理應用層的狀態： 如果一個 txn 改變的 global state 但是 txn failed，retry 第二次時哪個 global state 就和第一次不一致了。 query planner 能協助理解資料庫： 可以知道到底是 table scan 還是 index scan 等來決定 SQL 怎麼寫可以最佳化。 online migration 複雜但可行： 拆成一個個可復原的小步驟，dual write - change read - change write - remove old model，可以參考 Stripe 怎麼做，當然，還有 code-first 和 data-first 等不同的 migration mode。 可觀的資料庫成長所帶來的狀況難以預測： 這正是為什麼我們要在 scaling 前各種 migration/refactor/rewrite，不要以為你懂資料庫底層運作就很屌，從 hotspot、data 分佈不均、容量硬體、流量網路 partition，Scale will introduce new unknowns。（然後各種 data model 到部署流程和大小都要改變）  ","wordCount":"2035","inLanguage":"en","datePublished":"2020-06-13T00:00:00+08:00","dateModified":"2020-06-13T00:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://weihanglo.tw/posts/2020/www-0x15/"},"publisher":{"@type":"Organization","name":"Life is a refactoring process without tests","logo":{"@type":"ImageObject","url":"https://weihanglo.tw/favicon.ico"}}}</script>
</head>
<body id=top>
<script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script>
<header class=header>
<nav class=nav>
<div class=logo>
<a href=https://weihanglo.tw accesskey=h title="Life is a refactoring process without tests (Alt + H)">Life is a refactoring process without tests</a>
<div class=logo-switches>
<button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
</button>
</div>
</div>
<ul id=menu>
<li>
<a href=https://weihanglo.tw/ title=Home>
<span>Home</span>
</a>
</li>
<li>
<a href=https://weihanglo.tw/archives/ title=Archives>
<span>Archives</span>
</a>
</li>
<li>
<a href=https://weihanglo.tw/tags/ title=Tags>
<span>Tags</span>
</a>
</li>
<li>
<a href=https://weihanglo.tw/about/ title=About>
<span>About</span>
</a>
</li>
</ul>
</nav>
</header>
<main class=main>
<article class=post-single>
<header class=post-header>
<h1 class=post-title>
WWW 0x15: 你懂資料庫嗎
</h1>
<div class=post-meta><span title="2020-06-13 00:00:00 +0800 +0800">June 13, 2020</span>&nbsp;·&nbsp;5 min
</div>
</header> <div class=toc>
<details>
<summary accesskey=c title="(Alt + C)">
<span class=details>Table of Contents</span>
</summary>
<div class=inner><ul>
<li>
<a href=#the-best-medium-hard-data-analyst-sql-interview-questionshttpsquipcom2gwzarkuwk7w aria-label="The Best Medium-Hard Data Analyst SQL Interview Questions"><a href=https://quip.com/2gwZArKuWk7W>The Best Medium-Hard Data Analyst SQL Interview Questions</a></a></li>
<li>
<a href=#anxiety-in-product-developmenthttpsandreschweighofercomagileanxiety-in-product-development aria-label="Anxiety in product development"><a href=https://andreschweighofer.com/agile/anxiety-in-product-development/>Anxiety in product development</a></a></li>
<li>
<a href=#things-i-wished-more-developers-knew-about-databaseshttpsmediumcomrakyllthings-i-wished-more-developers-knew-about-databases-2d0178464f78 aria-label="Things I Wished More Developers Knew About Databases"><a href=https://medium.com/@rakyll/things-i-wished-more-developers-knew-about-databases-2d0178464f78>Things I Wished More Developers Knew About Databases</a></a>
</li>
</ul>
</div>
</details>
</div>
<div class=post-content><p>這裡是 WWW 第貳拾壹期，Wow Weihang Weekly 是一個毫無章法的個人週刊，出刊週期極不固定，從一週到五年都有可能。初期內容以軟體工程為主，等財富自由後會有更多雜食篇章。</p>
<h2 id=the-best-medium-hard-data-analyst-sql-interview-questionshttpsquipcom2gwzarkuwk7w><a href=https://quip.com/2gwZArKuWk7W>The Best Medium-Hard Data Analyst SQL Interview Questions</a><a hidden class=anchor aria-hidden=true href=#the-best-medium-hard-data-analyst-sql-interview-questionshttpsquipcom2gwzarkuwk7w>#</a></h2>
<p>作者總結自己的面試和工作經驗，整理出 Data Analyst 和 Data Scientist 的 SQL 面試題，著重在 self-join 和 window function 的相關練習。雖然 SQL 能力不是應徵資料分析職位的關鍵因子，我覺得反而是資訊工作者不可或缺的基本能力，從行銷、產品經理到工程師都應該要會 SQL DQL（Data Query Language），才能從報表、產品或系統看出洞見 。</p>
<h2 id=anxiety-in-product-developmenthttpsandreschweighofercomagileanxiety-in-product-development><a href=https://andreschweighofer.com/agile/anxiety-in-product-development/>Anxiety in product development</a><a hidden class=anchor aria-hidden=true href=#anxiety-in-product-developmenthttpsandreschweighofercomagileanxiety-in-product-development>#</a></h2>
<p>本文透過幾個行為觀察，分析是否掉入 anxiety driven development 的無限迴圈，這裡來個<del>超譯</del>摘要：</p>
<ul>
<li><strong>害怕輸輸去：</strong> 怕失去市佔、怕失去顧客、跟著競爭對手的 feature 跑，導致產品開發看似 agile 其實更不穩定，總是晚一個世代，將創新扼殺在時間漩渦。</li>
<li><strong>一心只想贏：</strong> Unique Selling Proposition（UCP）可以理解為產品在市場上的生態區位，可以說是「獨特賣點」，利用 UCP 是好事，但以價格創造的 UCP 最羸弱，最沒使用者忠誠，最容易被其他人宰割。</li>
<li><strong>並非發光的都是金子：</strong> 著急業務落後者容易短視近利，這種短期勝利可能只是短暫消除焦慮感，卻讓整個團隊陷入愁雲慘霧，回饋感漸低，特別是在專案尾聲想偷渡 feature 而不是留 buffer。</li>
<li><strong>掌舵：</strong> 主要是說退一步並勾勒出真實的展望，並以此影響策略，（對不起這已超出我能理解的範圍，請自行看原文）</li>
<li><strong>不可能的承諾：</strong> 焦慮讓你想要找回掌控權？你會開始將流程官僚化，寫下每個 ticket 細節與需求，這反而嚴重打擊各位的動機。</li>
<li><strong>脫離官僚：</strong> 信任帶來新幸福，信任你的市場研究和策略，信任你的團隊的專業和洞見，讓他們自行成為一個有機體。</li>
</ul>
<h2 id=things-i-wished-more-developers-knew-about-databaseshttpsmediumcomrakyllthings-i-wished-more-developers-knew-about-databases-2d0178464f78><a href=https://medium.com/@rakyll/things-i-wished-more-developers-knew-about-databases-2d0178464f78>Things I Wished More Developers Knew About Databases</a><a hidden class=anchor aria-hidden=true href=#things-i-wished-more-developers-knew-about-databaseshttpsmediumcomrakyllthings-i-wished-more-developers-knew-about-databases-2d0178464f78>#</a></h2>
<p>世界上大多數的開發者都碰過資料庫，但其實對資料庫一知半解，常常各種掉資料或是 deadlock。來自 Google 的 <a href=https://twitter.com/rakyll>@rakyll</a> 列出一些和資料庫相關常見的誤解和經驗，其實每個主題都可以獨立寫篇文章，以下稍微摘要：</p>
<ol>
<li>**當 99.999% 的時間網路不構成問題時，恭喜！你很幸運： **網路非常不可靠，從硬體，拓撲到鯊魚咬電纜（<a href=https://news.ltn.com.tw/news/life/breakingnews/2617852>台灣人早就知道會咬了</a>），而且網路掌控在大型企業或雲端供應商手中，對開發者來說很難鑑定其錯誤。</li>
<li><strong>一個 ACID，各自表述：</strong> 不是所有資料庫都符合 ACID，宣稱符合 ACID 的資料庫也不一定行為正確，這裡 MongoDB 的沒開 journal 60 秒才 fsync 一次的事件又被拿出來鞭屍，當然，最近 <a href=https://jepsen.io/analyses/mongodb-4.2.6>Jepsen 幹爆 MongoDB 4.2.6</a> 的事件也可以關注一下。</li>
<li><strong>每個資料庫能達成的一致性和隔離性程度不同：</strong> ACID 的 Consistency 和 Isolation 的光譜其實很廣，而且這兩個特性其實很貴，所以不同資料庫的 tradeoff 不盡相同，可以參考 <a href=https://jepsen.io/consistency>Jepsen Consistency Model</a> 還有各資料的 <a href=https://github.com/ept/hermitage>Isolation Level 大表</a>看看你要什麼</li>
<li><strong>不適用 exclusive lock 時，樂觀鎖是個選項：</strong> 樂觀鎖是一種在讀取 tuple 時先記錄 checksum/timestamp/version 資訊，寫入時再檢查 tuple 的這些資訊是否改變來決定寫入與否（但要注意 isolation level 和 dirty read 的關係，如果 write 太多可能樂觀鎖效能會較差）</li>
<li><strong>除了 dirty read 和 data loss，還有更古怪的事：</strong> 前兩者可以透過注意鎖和 race condition 來避免，但 read/write skew 這種邏輯錯誤更難發覺。</li>
<li><strong>我的資料庫和我在執行順序上無法總是達成共識：</strong> txn 的順序是依照接收到 txn 順序執行，而非 code 撰寫順序，如果有不同的操作需要保證順序，請包入同一個 txn。</li>
<li><strong>application-level sharding 可以實作在應用層之外：</strong> 例如額外的 sharing service 處理這塊，application 還是處理商業邏輯就行，像 YouTube 底層的 Vitness ，或是 Shopee 底層的 TiDB 的底層 TiKV 都是箇中高手。
<img loading=lazy src=https://i.imgur.com/cDkVBuL.png alt>
<img loading=lazy src=https://raw.githubusercontent.com/tikv/tikv/c8afff7147c9bb80c5b47a1a79f59d7dc2dec81b/images/tikv_stack.png alt>
</li>
<li><strong><code>AUTOINCREMENT</code> 有害論：</strong> 在分散式系統不易生成正確的 <code>AUTOINCREMENT</code> ID、當作 partition key 可能會產生 hotspot、有其他 unique key 是 <code>AUTOINCREMENT</code> key 就是廢物</li>
<li><strong>資料雖過期但有用（而且是 lock-free）：</strong> MVCC 可以達到 Repeatable read isolation level，對 read-heavy app 或是 globally distributed app 能有效降低延遲。（代價就是偶爾要跑 GC 或 <code>VACUUM</code>）</li>
<li><strong>時間會在不同來源間扭曲：</strong> 所有時間 API 都在說謊，就算用 NTP 服務還是有網路延遲。作者在這邊偷偷推銷 Google 的 TrueTime，但有趣的是 API 回傳是個 time range，當前時間就落在這個範圍中。</li>
<li><strong>我都把「延遲」念「延遲」：</strong> latency 在不同領域意義不同，client latency = database latency + network latency，服用前請看說明書。</li>
<li><strong>評估效能該考慮 per transaction 等場景的需求：</strong> 幫自家資料庫打廣告時不能只著重在 read/write throughput，應還要設計不同的場景、constraint、transaction 才能，脫離應用場景的 benchmark 都是流氓。</li>
<li><strong>nested transaction 有害論：</strong> nested txn 會導致非預期的行為，例如 如果 inner txn 錯誤 rollback，那 outer txn 該 rollback 嗎？如果是開發 request-response 的 web app，我自己會傾向一個 request-response 就是一個 txn。</li>
<li><strong>transaction 不該管理應用層的狀態：</strong> 如果一個 txn 改變的 global state 但是 txn failed，retry 第二次時哪個 global state 就和第一次不一致了。</li>
<li><strong>query planner 能協助理解資料庫：</strong> 可以知道到底是 table scan 還是 index scan 等來決定 SQL 怎麼寫可以最佳化。</li>
<li><strong>online migration 複雜但可行：</strong> 拆成一個個可復原的小步驟，dual write -> change read -> change write -> remove old model，可以參考 <a href=https://stripe.com/blog/online-migrations>Stripe 怎麼做</a>，當然，還有 code-first 和 data-first 等不同的 migration mode。</li>
<li><strong>可觀的資料庫成長所帶來的狀況難以預測：</strong> 這正是為什麼我們要在 scaling 前各種 migration/refactor/rewrite，不要以為你懂資料庫底層運作就很屌，從 hotspot、data 分佈不均、容量硬體、流量網路 partition，Scale will introduce new unknowns。（然後各種 data model 到部署流程和大小都要改變）</li>
</ol>
</div>
<footer class=post-footer>
<ul class=post-tags>
<li><a href=https://weihanglo.tw/tags/databases/>Databases</a></li>
</ul>
<nav class=paginav>
<a class=prev href=https://weihanglo.tw/posts/2020/www-0x16/>
<span class=title>« Prev</span>
<br>
<span>WWW 0x16: JWT、分散式 ID 生成、k8s 安全性</span>
</a>
<a class=next href=https://weihanglo.tw/posts/2020/www-0x14/>
<span class=title>Next »</span>
<br>
<span>WWW 0x14: Structured concurrency is promising</span>
</a>
</nav>
</footer>
</article>
</main>
<footer class=footer>
<span>CC BY-NC-SA 4.0</span>
<span>
Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a>
</span>
</footer>
<a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a>
<script>let menu=document.getElementById('menu');menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script>
<script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script>
<script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script>
</body>
</html>