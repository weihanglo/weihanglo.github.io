<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Zoom 很讚，host 可以看你有沒有認真
— Zoom: Attendee attention tracking
 這裡是 WWW 第拾壹期，Wow Weihang Weekly 是一個毫無章法的個人週刊，出刊週期極不固定，從一週到五年都有可能。初期內容以軟體工程為主，等財富自由後會有更多雜食篇章。
What future does the captical of Japan carry?  Note: 東京不算是日本的「法定」首都
 這份簡報講解 Rust 最流行的非同步框架 Tokio 運作原理，透過圖像化的流程說明 future 如何於 Tokio 互動中被 poll 和 waken，非常直觀易理解，比敝人在 COSCUP 2019 的簡報 Our Future in Rust 好太多了。
Using Zoom? Here are the privacy issues you need to be aware of 因為疫情緣故，最近 Zoom 很夯，剛好有篇文章寫到 Zoom 有很多噁心有趣的 feature：
 host 可以看參與者專不專心，超過 30 喵沒在看 zoom 就會 alert 會存一份聊天紀錄給 host，但沒說 private message 會不會給 host 宣稱蒐集名字、實體位置、email、電話、公司和職稱但不會拿去賣，只會用在「business purposes」  推薦有空看看這篇文章，尤其是「How you can protect your data」一節。"><meta name=theme-color content="#ffcd00"><meta property="og:title" content="WWW 0x0B: 個資被偷和管理 DNS 紀錄，孰難孰易 • Weihang Lo"><meta property="og:description" content="Zoom 很讚，host 可以看你有沒有認真
— Zoom: Attendee attention tracking
 這裡是 WWW 第拾壹期，Wow Weihang Weekly 是一個毫無章法的個人週刊，出刊週期極不固定，從一週到五年都有可能。初期內容以軟體工程為主，等財富自由後會有更多雜食篇章。
What future does the captical of Japan carry?  Note: 東京不算是日本的「法定」首都
 這份簡報講解 Rust 最流行的非同步框架 Tokio 運作原理，透過圖像化的流程說明 future 如何於 Tokio 互動中被 poll 和 waken，非常直觀易理解，比敝人在 COSCUP 2019 的簡報 Our Future in Rust 好太多了。
Using Zoom? Here are the privacy issues you need to be aware of 因為疫情緣故，最近 Zoom 很夯，剛好有篇文章寫到 Zoom 有很多噁心有趣的 feature：
 host 可以看參與者專不專心，超過 30 喵沒在看 zoom 就會 alert 會存一份聊天紀錄給 host，但沒說 private message 會不會給 host 宣稱蒐集名字、實體位置、email、電話、公司和職稱但不會拿去賣，只會用在「business purposes」  推薦有空看看這篇文章，尤其是「How you can protect your data」一節。"><meta property="og:url" content="https://weihanglo.tw/posts/2020/www-0x0b/"><meta property="og:site_name" content="Weihang Lo"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:tag" content="Weekly"><meta property="article:tag" content="Rust"><meta property="article:tag" content="Kubernetes"><meta property="article:tag" content="Privacy"><meta property="article:published_time" content="2020-04-04T00:00:00+08:00"><meta property="article:modified_time" content="2020-04-04T00:00:00+08:00"><meta name=twitter:card content="summary"><meta name=generator content="Hugo 0.74.3"><title>WWW 0x0B: 個資被偷和管理 DNS 紀錄，孰難孰易 • Weihang Lo</title><link rel=canonical href=https://weihanglo.tw/posts/2020/www-0x0b/><link rel=icon href=/favicon.ico><link rel=stylesheet href=/assets/css/main.ab98e12b.css><link rel=stylesheet href=/css/custom.css><style>:root{--color-accent:#ffcd00}</style></head><body class="page type-posts"><div class=site><a class=screen-reader-text href=#content>Skip to Content</a><div class=main><nav id=main-menu class="menu main-menu" aria-label="Main Menu"><div class=container><ul><li class=item><a href=/>Home</a></li><li class=item><a href=/posts/>Posts</a></li><li class=item><a href=/tags/>Tags</a></li><li class=item><a href=/about/>About</a></li></ul></div></nav><div class=header-widgets><div class=container></div></div><header id=header class="header site-header"><div class="container sep-after"><div class=header-info><p class="site-title title">Weihang Lo</p><p class="desc site-desc"></p></div></div></header><main id=content><article lang=en class=entry><header class="header entry-header"><div class="container sep-after"><div class=header-info><h1 class=title>WWW 0x0B: 個資被偷和管理 DNS 紀錄，孰難孰易</h1></div><div class=entry-meta><span class=posted-on><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg><span class=screen-reader-text>Posted on</span>
<time class=entry-date datetime=2020-04-04T00:00:00+08:00>2020, Apr 04</time></span>
<span class=reading-time><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 15 15"/></svg>2 mins read</span></div></div></header><div class="container entry-content"><blockquote><p>Zoom 很讚，host 可以看你有沒有認真</p><p>— Zoom: Attendee attention tracking</p></blockquote><p>這裡是 WWW 第拾壹期，Wow Weihang Weekly 是一個毫無章法的個人週刊，出刊週期極不固定，從一週到五年都有可能。初期內容以軟體工程為主，等財富自由後會有更多雜食篇章。</p><h2 id=what-future-does-the-captical-of-japan-carryhttpsbitly2s7nwbl><a href=https://bit.ly/2S7NwbL>What future does the captical of Japan carry?</a></h2><blockquote><p>Note: 東京不算是日本的「法定」首都</p></blockquote><p>這份簡報講解 Rust 最流行的非同步框架 <a href=https://tokio.rs/>Tokio</a> 運作原理，透過圖像化的流程說明 <code>future</code> 如何於 Tokio 互動中被 poll 和 waken，非常直觀易理解，比敝人在 COSCUP 2019 的簡報 <a href=https://weihanglo.tw/slides/coscup2019-our-future-in-rust.pdf>Our Future in Rust</a> 好太多了。</p><p><img src=https://rust-lang.github.io/futures-rs/assets/images/futures-rs-logo.svg alt></p><h2 id=using-zoom-here-are-the-privacy-issues-you-need-to-be-aware-ofhttpsprotonmailcomblogzoom-privacy-issues><a href=https://protonmail.com/blog/zoom-privacy-issues/>Using Zoom? Here are the privacy issues you need to be aware of</a></h2><p>因為疫情緣故，最近 Zoom 很夯，剛好有篇文章寫到 Zoom 有很多噁心有趣的 feature：</p><ul><li>host 可以看參與者專不專心，超過 30 喵沒在看 zoom 就會 alert</li><li>會存一份聊天紀錄給 host，但沒說 private message 會不會給 host</li><li>宣稱蒐集名字、實體位置、email、電話、公司和職稱但不會拿去賣，只會用在「business purposes」</li></ul><p>推薦有空看看這篇文章，尤其是「How you can protect your data」一節。</p><h2 id=controllergo796-only-numeric-ports-are-allowed-in-externalname-services-http-is-not-valid-as-a-tcpudp-porthttpsgithubcomkubernetesingress-nginxpull4449filesdiff-86ac9ff9d75a0c5005c116e766a6127dl851><a href=https://github.com/kubernetes/ingress-nginx/pull/4449/files#diff-86ac9ff9d75a0c5005c116e766a6127dL851>controller.go:796] only numeric ports are allowed in ExternalName services: http is not valid as a TCP/UDP port</a></h2><p>最近一些第三方服務需要設定 custom domain，DNS 簡單解決，但掛 SSL 憑證卻有點棘手，由於不想額外開一台 proxy
server，決定使用 <strong>Plan A： 使用既有的 NGINX</strong> 。我們的 custom domain 需求是兩層 subdomain 的 <code>one.two.example.com</code>，而當前憑證是 <code>*.example.com</code> 的 wildcard certificate，原本以為可以成功掛憑證，卻一直沒有成功，後來才知道 <a href=https://www.ietf.org/rfc/rfc2818.txt>wildcard certificate 只支援一層 subdomain</a>。</p><pre><code>Matching is performed using the matching rules specified by
[RFC2459].  If more than one identity of a given type is present in
the certificate (e.g., more than one dNSName name, a match in any one
of the set is considered acceptable.) Names may contain the wildcard
character * which is considered to match any single domain name
component or component fragment. E.g., *.a.com matches foo.a.com but
not bar.foo.a.com. f*.com matches foo.com but not bar.com.
</code></pre><p>於是，改用 <strong>Plan B：Cloudflare 的 Universal SSL 免費掛憑證</strong> ，嘗試將 DNS 導向 Cloudflare，卻發現 <a href=https://support.cloudflare.com/hc/en-us/articles/204151138-Understanding-Universal-SSL#h_408802647171549663799400>Universal SSL 也不支援 multi-level subdomain（除非付錢）</a>，只好 say goodbye。</p><p>最後只能使出 <strong>Plan C：沿用在 Kubernetes 上的 NGINX Ingress Controller</strong> 。先將 DNS A record 導向 ingress controller，然後建立 <code>ExternalName</code> 的 service 指向第三方服務，再透過 <a href=https://cert-manager.io/>cert-manager</a> 發憑證。豈料一直無法成功掛上憑證，原來是 0.26.0 版之前的 NGINX Ingress Controller 的 <code>Ingress</code> 資源的 backend service 如果是 type <code>ExternalName</code>，就只能使用 numeric port，不能使用 <a href=https://www.iana.org/assignments/service-names-port-numbers/service-names-port-numbers.xhtml>IANA 定義的 named port</a>，本來寫 <code>backend.servicePort=http</code> 只好改寫成 <code>80</code> port。</p><p>附上錯誤訊息：</p><pre><code>I0229 06:00:03.677872       6 controller.go:177] ingress backend successfully reloaded...
W0229 06:00:06.744761       6 controller.go:796] only numeric ports are allowed in ExternalName services: http is not valid as a TCP/UDP port
I0229 06:00:06.744977       6 controller.go:168] backend reload required
I0229 06:00:06.979204       6 controller.go:177] ingress backend successfully reloaded...
</code></pre></div><footer class=entry-footer><div class="container sep-before"><div class=tags><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2H12l8.59 8.59A2 2 0 0120.59 13.41z"/><line x1="7" y1="7" x2="7" y2="7"/></svg><span class=screen-reader-text>Tags: </span><a class=tag href=/tags/weekly/>Weekly</a>, <a class=tag href=/tags/rust/>Rust</a>, <a class=tag href=/tags/kubernetes/>Kubernetes</a>, <a class=tag href=/tags/privacy/>Privacy</a></div></div><div style=text-align:center;padding-top:2em><a href=https://creativecommons.org/licenses/by-nc-sa/4.0/><img src=https://licensebuttons.net/l/by-nc-sa/4.0/88x31.png alt=cc-by-nc-sa-4></a></div></footer></article><nav class=entry-nav><div class=container><div class="prev-entry sep-before"><a href=/posts/2020/www-0x0a/><span aria-hidden=true><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><line x1="20" y1="12" x2="4" y2="12"/><polyline points="10 18 4 12 10 6"/></svg>Previous</span>
<span class=screen-reader-text>Previous post: </span>WWW 0x0A: 嗯，你這塊 0xDEADBEEF</a></div><div class="next-entry sep-before"><a href=/posts/2020/www-0x0c/><span class=screen-reader-text>Next post: </span>WWW 0x0C: 未具名<span aria-hidden=true>Next<svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><line x1="4" y1="12" x2="20" y2="12"/><polyline points="14 6 20 12 14 18"/></svg></span></a></div></div></nav></main><footer id=footer class=footer><div class="container sep-before"><section class="widget widget-social_menu sep-after"><nav aria-label="Social Menu"><ul><li><a href=https://github.com/weihanglo target=_blank rel=noopener><span class=screen-reader-text>Open Github account in new tab</span><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77a5.44 5.44.0 00-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a></li><li><a href=https://facebook.com/weihanglo target=_blank rel=noopener><span class=screen-reader-text>Open Facebook account in new tab</span><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M18 2h-3a5 5 0 00-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 011-1h3z"/></svg></a></li><li><a href=https://twitter.com/weihanglo target=_blank rel=noopener><span class=screen-reader-text>Open Twitter account in new tab</span><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><title>Twitter icon</title><path d="M23 3a10.9 10.9.0 01-3.14 1.53 4.48 4.48.0 00-7.86 3v1A10.66 10.66.0 013 4s-4 9 5 13a11.64 11.64.0 01-7 2c9 5 20 0 20-11.5a4.5 4.5.0 00-.08-.83A7.72 7.72.0 0023 3z"/></svg></a></li><li><a href=https://linkedin.com/in/weihanglo target=_blank rel=noopener><span class=screen-reader-text>Open Linkedin account in new tab</span><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M16 8a6 6 0 016 6v7h-4v-7a2 2 0 00-2-2 2 2 0 00-2 2v7h-4v-7a6 6 0 016-6z"/><rect x="2" y="9" width="4" height="12"/><circle cx="4" cy="4" r="2"/></svg></a></li><li><a href=https://t.me/weihanglo target=_blank rel=noopener><span class=screen-reader-text>Open Telegram account in new tab</span><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><title>Telegram icon</title><path d="M23.91 3.79 20.3 20.84c-.25 1.21-.98 1.5-2 .94l-5.5-4.07-2.66 2.57c-.3.3-.55.56-1.1.56-.72.0-.6-.27-.84-.95L6.3 13.7l-5.45-1.7c-1.18-.35-1.19-1.16.26-1.75l21.26-8.2c.97-.43 1.9.24 1.53 1.73z"/></svg></a></li></ul></nav></section><div class=copyright><p>&copy; 2017-2020 Weihang Lo</p></div></div></footer></div></div><script>window.__assets_js_src="/assets/js/"</script><script src=/assets/js/main.c3bcf2df.js></script><script src=/js/custom.js></script></body></html>