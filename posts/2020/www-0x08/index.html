<!doctype html><html lang=en dir=auto>
<head><meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=robots content="index, follow">
<title>WWW 0x08: ä½ çš„ Helm chart å®‰å…¨å— | Life is a refactoring process without tests</title>
<meta name=keywords content="Weekly,FOSS,Kubernetes">
<meta name=description content="organizations which design systems are constrained to produce designs which are copies of the communication structures of these organizations. &ndash; M. Conway é€™è£¡æ˜¯ WWW ç¬¬æŒæœŸï¼ŒWow Weihang Weekly æ˜¯ä¸€å€‹æ¯«ç„¡ç« æ³•çš„å€‹äººé€±åˆŠï¼Œå‡ºåˆŠé€±æœŸæ¥µä¸å›ºå®šï¼Œå¾ä¸€é€±åˆ°äº”å¹´éƒ½æœ‰å¯èƒ½ã€‚åˆæœŸ">
<meta name=author content>
<link rel=canonical href=https://weihanglo.tw/posts/2020/www-0x08/>
<link crossorigin=anonymous href=/assets/css/stylesheet.css rel="preload stylesheet" as=style>
<link rel=icon href=https://weihanglo.tw/favicon.ico>
<link rel=icon type=image/png sizes=16x16 href=https://weihanglo.tw/favicon-16x16.png>
<link rel=icon type=image/png sizes=32x32 href=https://weihanglo.tw/favicon-32x32.png>
<link rel=apple-touch-icon href=https://weihanglo.tw/apple-touch-icon.png>
<link rel=mask-icon href=https://weihanglo.tw/safari-pinned-tab.svg>
<meta name=theme-color content="#2e2e33">
<meta name=msapplication-TileColor content="#2e2e33">
<noscript>
<style>#theme-toggle,.top-link{display:none}</style>
<style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style>
</noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css integrity=sha384-MlJdn/WNKDGXveldHDdyRP1R4CTHr3FeuDNfhsLPYrq2t0UBkUdK2jyTnXPEK1NQ crossorigin=anonymous>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.js integrity=sha384-VQ8d8WVFw0yHhCk5E8I86oOhv48xLpnDZx5T9GogA/Y84DcCKWXDmSDfn13bzFZY crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/contrib/auto-render.min.js integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR crossorigin=anonymous></script>
<script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:'$$',right:'$$',display:!0},{left:'$',right:'$',display:!1},{left:'\\(',right:'\\)',display:!1},{left:'\\[',right:'\\]',display:!0}],throwOnError:!1})})</script>
<meta property="og:title" content="WWW 0x08: ä½ çš„ Helm chart å®‰å…¨å—">
<meta property="og:description" content="organizations which design systems are constrained to produce designs which are copies of the communication structures of these organizations. &ndash; M. Conway é€™è£¡æ˜¯ WWW ç¬¬æŒæœŸï¼ŒWow Weihang Weekly æ˜¯ä¸€å€‹æ¯«ç„¡ç« æ³•çš„å€‹äººé€±åˆŠï¼Œå‡ºåˆŠé€±æœŸæ¥µä¸å›ºå®šï¼Œå¾ä¸€é€±åˆ°äº”å¹´éƒ½æœ‰å¯èƒ½ã€‚åˆæœŸ">
<meta property="og:type" content="article">
<meta property="og:url" content="https://weihanglo.tw/posts/2020/www-0x08/"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2020-03-14T00:00:00+08:00">
<meta property="article:modified_time" content="2020-03-14T00:00:00+08:00">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="WWW 0x08: ä½ çš„ Helm chart å®‰å…¨å—">
<meta name=twitter:description content="organizations which design systems are constrained to produce designs which are copies of the communication structures of these organizations. &ndash; M. Conway é€™è£¡æ˜¯ WWW ç¬¬æŒæœŸï¼ŒWow Weihang Weekly æ˜¯ä¸€å€‹æ¯«ç„¡ç« æ³•çš„å€‹äººé€±åˆŠï¼Œå‡ºåˆŠé€±æœŸæ¥µä¸å›ºå®šï¼Œå¾ä¸€é€±åˆ°äº”å¹´éƒ½æœ‰å¯èƒ½ã€‚åˆæœŸ">
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://weihanglo.tw/posts/"},{"@type":"ListItem","position":3,"name":"WWW 0x08: ä½ çš„ Helm chart å®‰å…¨å—","item":"https://weihanglo.tw/posts/2020/www-0x08/"}]}</script>
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"WWW 0x08: ä½ çš„ Helm chart å®‰å…¨å—","name":"WWW 0x08: ä½ çš„ Helm chart å®‰å…¨å—","description":"organizations which design systems are constrained to produce designs which are copies of the communication structures of these organizations. \u0026ndash; M. Conway é€™è£¡æ˜¯ WWW ç¬¬æŒæœŸï¼ŒWow Weihang Weekly æ˜¯ä¸€å€‹æ¯«ç„¡ç« æ³•çš„å€‹äººé€±åˆŠï¼Œå‡ºåˆŠé€±æœŸæ¥µä¸å›ºå®šï¼Œå¾ä¸€é€±åˆ°äº”å¹´éƒ½æœ‰å¯èƒ½ã€‚åˆæœŸ","keywords":["Weekly","FOSS","Kubernetes"],"articleBody":" organizations which design systems are constrained to produce designs which are copies of the communication structures of these organizations.\nâ€“â€‰M. Conway\n é€™è£¡æ˜¯ WWW ç¬¬æŒæœŸï¼ŒWow Weihang Weekly æ˜¯ä¸€å€‹æ¯«ç„¡ç« æ³•çš„å€‹äººé€±åˆŠï¼Œå‡ºåˆŠé€±æœŸæ¥µä¸å›ºå®šï¼Œå¾ä¸€é€±åˆ°äº”å¹´éƒ½æœ‰å¯èƒ½ã€‚åˆæœŸå…§å®¹ä»¥è»Ÿé«”å·¥ç¨‹ç‚ºä¸»ï¼Œç­‰è²¡å¯Œè‡ªç”±å¾Œæœƒæœ‰æ›´å¤šé›œé£Ÿç¯‡ç« ã€‚\nMy FOSS Story é€™ç¯‡æ–‡ç« æ˜¯ Rust ç¤¾ç¾¤éå¸¸æœ‰åçš„ Andrew Gallant (@burntsushi) æ‰€æ’°ï¼Œè¬›è¿°äº†ä»–è‡ªèº«èˆ‡ FOSS çš„ç³¾è‘›ã€‚æ–‡ç« è£¡é¢è¨±å¤šç¯‡å¹…åœ¨æè¿° FOSS ä¸­çš„è² é¢äº‹æƒ…ï¼Œä¸éé€™ä¹Ÿæ˜¯é–‹æºç¤¾ç¾¤è¼ƒå°‘æåŠå’Œè™•ç†çš„ä¸€å¡Šã€‚é€™ç¯‡æ–‡ç« ä¹Ÿå¯ä»¥è¦–ç‚ºæ˜¯ burntsushi é‡å°æœ€è¿‘ Rust ç¤¾ç¾¤æœ€å¤§çš„ web framework Actix çš„ä½œè€…é€€å‡ºé–‹æºç•Œçš„æœ‰æ„Ÿè€Œç™¼ã€‚ç¯€éŒ„ä¸€äº›æˆ‘è¦ºå¾—å¯ä»¥å¸¶è‘—èµ°çš„å¯¦ç”¨æƒ³æ³•ï¼š\n è¨­ç«‹ç•Œç·šï¼šé–‹æºå³æ”¿æ²»ï¼Œç¶²è·¯ä¸Šå°±æ˜¯æœ‰ä¸€å †é…¸æ°‘ï¼Œå°±ç®—æ²’æœ‰ï¼Œä¹Ÿæœ‰å¤ªå¤šå¤ªå¤š issue å’Œ PR å£“å¾—æˆ‘å€‘å–˜ä¸éæ°£ï¼ŒæŠŠé–‹æºå·¥ä½œå’Œå€‹äººç”Ÿæ´»åˆ‡å‰²é–‹ä¾†ï¼Œè¨­ç«‹ç•Œç·šå’Œåœæé»ï¼Œè‡ªå·±çš„æ´»è‡ªå·±å®‰æ’ã€‚ éµå¾ªã€Œæ¯”ä¾‹åŸå‰‡ã€ï¼šå¦‚æœæå‡ºä¸€å€‹å•é¡Œå»åƒ…å¯¥å¯¥å¹¾è¡Œï¼Œå°±ç”¨å¯¥å¯¥å¹¾è¡Œå›è¦†å§ã€‚ å•é¡Œé‡ç¾ï¼šè‰¯å¥½çš„å•é¡Œå›å ±èƒ½æ­é…ç°¡å–®é‡ç¾æ–¹å¼æœ€æ£’ï¼Œå¦‚æœæ²’è¾¦æ³•ï¼Œé‚£å°±å¸¶è‘—ä½œè€…ä¸€èµ· debug å§ï¼  ä½œè€…æœ€å¾Œé›–ç„¶è¡¨åˆ—è¨±å¤šè² é¢è¡Œç‚ºï¼Œä½†ä¹Ÿèªªäº† FOSS ä»ç„¶æœ‰è¨±å¤šæœ‰è¶£çš„ç¶“é©—å’Œç¾å¥½ã€‚ä¿¡ä»»ç‚ºé–‹æºä¹‹æœ¬ï¼Œå¸Œæœ›é€™ç¯‡æ–‡ç« èƒ½å¸¶çµ¦ FOSS ç•Œæ‰“æ»¾çš„æˆ‘å€‘æ›´å¤šå•Ÿç™¼ã€‚\nUncharted territory â€“ discovering vulnerabilities in public Helm Charts âš ï¸âš ï¸âš ï¸ ä½ çš„ Helm chart å®‰å…¨å— âš ï¸âš ï¸âš ï¸\nå°ˆé–€åšå„å¤§èªè¨€çš„é–‹æºå¥—ä»¶å®‰å…¨æ€§æª¢é©—çš„ Snykï¼Œé™¤äº†æª¢é©—åŸæœ‰çš„ npmã€PyPI ç­‰å¥—ä»¶ï¼Œæœ€è¿‘é–‹å§‹æª¢é©—èµ· Helm å®˜æ–¹çš„ stable charts ä¸­æ¯å€‹ image æ˜¯å¦æœ‰å®‰å…¨æ€§æ¼æ´ï¼Œä¸¦å‡ºä¸€ä»½å®‰å…¨æ€§å ±å‘Šã€‚å ±å‘ŠæŒ‡å‡ºï¼š\n 277 å€‹ stable chart ä¸­ï¼Œ68% æœ‰é«˜åº¦å®‰å…¨æ€§æ¼æ´ï¼Œä½† 64% å¯ä»¥é€éå‡ç´š image ä¾†è§£æ±ºæ¼æ´ æœ€å¸¸è¦‹çš„é¢¨éšªæœ‰ï¼šout-of-bounds reads/writesã€access restriction bypassã€NULL pointer dereferenceï¼ˆä¸€å’Œä¸‰ Rust å®Œç¾è§£æ±ºï¼‰ dduportal/bats:0.4.0 æ˜¯æœ€å¸¸ç”¨çš„ imageï¼Œä¹Ÿæ“æœ‰æœ€å¤šæ¼æ´ã€‚postgres:9.6.2 ç¬¬äºŒã€‚unguiculus/docker-python3-phantomjs-selenium:v1 ç¬¬ä¸‰ã€‚  æ­¤å¤–ï¼ŒSnyk åŒæ™‚é–‹æºäº†ä¸€æ”¯æ–¹ä¾¿æª¢æŸ¥ Helm chart image å®‰å…¨æ€§çš„ Helm pluginï¼Œéå¸¸æ–¹ä¾¿ï¼Œé™¤äº†éœ€è¦è¨»å†Š Snyk å¸³è™Ÿé †ä¾¿ç«Šå–é›»å­éƒµä»¶ä¹‹å¤–ã€‚\nArchitecting Kubernetes clusters â€” how many should you have? æœ¬ç¯‡æ–‡ç« èªªæ˜ä¸åŒæ•¸é‡çš„ cluster è¦åŠƒä¹‹æ‡‰ç”¨å ´æ™¯èˆ‡å„ªåŠ£å‹¢ï¼Œæ–‡å…§é™„æœ‰è¨±å¤šé€£çµï¼Œå€¼å¾—å»¶ä¼¸é–±è®€ã€‚\n å–®ä¸€å¤§å‹å…±ç”¨ clusterï¼šæ‰€æœ‰ä¸åŒç’°å¢ƒçš„ app éƒ½åœ¨åŒä¸€å€‹ cluster  âœ… è³‡æºåˆ©ç”¨ç‡é«˜ âœ… ä¾¿å®œ âœ… ç®¡ç†å®¹æ˜“ï¼šCI/CD æµç¨‹ã€å‡ç´š k8s ğŸ‘ å–®é»æ•…éšœæ©Ÿç‡é«˜ï¼šk8s å‡ç´šå¤±æ•—ã€clsuter-wide å…ƒä»¶å£æ‰ ğŸ‘ å®‰å…¨æ€§è¼ƒå·®ï¼šç‰©ç†éš”é›¢ç¨‹åº¦ä½ï¼Œå¯ä»¥é€é PodSecurityPolicy è™•ç†ï¼Œä½†ä¸¦éæ˜“äº‹ ğŸ‘ ç„¡ç‰©ç†è³‡æºéš”é›¢ï¼šè³‡æºéš”é›¢åªèƒ½é€é resource request limitã€ResourceQuota è™•ç†ï¼ŒåŒæ¨£ä¸å¥½è¨­å®š ğŸ‘ å¤šä½¿ç”¨è€…ï¼šè¼ƒä¸å®‰å…¨ï¼Œé ˆé€šé RBAC é¡å¤–è¨­å®š ğŸ‘ Cluster ä¸èƒ½ç„¡é™åˆ¶å¢é•·ï¼šnode å’Œ pod é‚„æœ‰ container åœ¨ cluster ä¸­éƒ½æœ‰ä¸€å€‹ç†è«–ä¸Šé™å€¼ï¼Œéœ€æ³¨æ„ã€‚   å¤šå€‹å°å‹å–®ä¸€ç”¨é€” clusterï¼šä¸åŒç’°å¢ƒï¼Œä¸åŒ app éƒ½å„è‡ªç¨ç«‹ä¸€å€‹ cluster  âœ… ç¸®å°çˆ†ç ´åŠå¾‘ï¼šä¸€å€‹ cluster æ›äº†å°±æ˜¯ä¸€å€‹ç‰¹å®šç’°å¢ƒçš„ app æ›äº†è€Œå·² âœ… ç¨ç«‹éš”é›¢ï¼šæ¯å€‹å·¥ä½œè² è¼‰ï¼ˆworkloadï¼‰éƒ½æ˜¯ç¨ç«‹çš„ç’°å¢ƒã€OSã€CPUã€memory âœ… è¼ƒå°‘ä½¿ç”¨è€…ï¼šæ›´å®¹æ˜“ç®¡ç† cluster çš„ access control ğŸ‘ è³‡æºåˆ©ç”¨ç‡ä½ ğŸ‘ æ¯”è¼ƒè²´ï¼šdata plane å’Œ control plane éƒ½å¢åŠ äº† ğŸ‘ è¤‡é›œçš„è·¨ cluster æ¬Šé™ç®¡ç†   ä¸€å€‹ app ä¸€å€‹ clusterï¼šæ¯å€‹ app çš„ä¸åŒç’°å¢ƒï¼ˆé–‹ç™¼ã€æ­£å¼ã€æ¸¬è©¦ï¼‰éƒ½æ”¾åœ¨åŒä¸€å€‹ cluster  âœ… cluster å¯ä»¥ç‚º app é‡èº«æ‰“é€ ï¼ˆe.g. MongodDB å°±å¯ä»¥ç”¨ zfs çš„ nodeï¼‰ ğŸ‘ ä¸åŒç’°å¢ƒåœ¨åŒä¸€å€‹ clusterï¼šæ¸¬è©¦æˆ–é–‹ç™¼ç’°å¢ƒå¦‚æœæœ‰ bugï¼Œå¯èƒ½æœƒå°è‡´æ­£å¼ç’°å¢ƒå´©å£   ä¸€å€‹ç’°å¢ƒä¸€å€‹ clusterï¼šæŒ‰ç…§æ¸¬è©¦ã€é–‹ç™¼ã€æ­£å¼ç­‰ç’°å¢ƒå»ºç«‹ä¸åŒçš„ cluster  âœ… éš”é›¢ã€Œæ­£å¼ã€ç’°å¢ƒï¼ˆä¸å¿…è§£é‡‹ï¼‰ âœ… æœ€å°åŒ–æ­£å¼ç’°å¢ƒçš„ access controlï¼šé™¤äº† CI/CDï¼ŒåŸå‰‡ä¸Šæ²’æœ‰äººéœ€è¦é€²å…¥æ­£å¼ç’°å¢ƒ ğŸ‘ APP ä¹‹é–“æ²’æœ‰éš”é›¢ ğŸ‘ ç’°å¢ƒæ²’æœ‰é‡å°ä¸åŒéœ€æ±‚æœ€ä½³åŒ–ï¼šä¾‹å¦‚æœ‰éœ€è¦ GPU çš„ appï¼Œé‚£å°±æ¯å€‹ç’°å¢ƒéƒ½éœ€è¦è£ä¸€å€‹ GPU node    æˆ‘å€‹äººçœ‹å®Œçš„çµè«–æ˜¯\n å…ˆå­¸å¥½å„ç¨® resource request limit å’Œ RBAC æŠŠ service meshã€service discoveryã€API gateway é€™äº›åŸºç¤è¨­æ–½æå¥½ï¼Œè®“ inter-cluster æºé€šç„¡éšœç¤™ å¾ Cluster per environment é–‹å§‹æèµ·ï¼Œæœ‰éœ€æ±‚å†ç‰¹åŒ–å‡º app-specific cluster æ°¸é è¨˜å¾— Conwayâ€™s law  ","wordCount":"1551","inLanguage":"en","datePublished":"2020-03-14T00:00:00+08:00","dateModified":"2020-03-14T00:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://weihanglo.tw/posts/2020/www-0x08/"},"publisher":{"@type":"Organization","name":"Life is a refactoring process without tests","logo":{"@type":"ImageObject","url":"https://weihanglo.tw/favicon.ico"}}}</script>
</head>
<body id=top>
<script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script>
<header class=header>
<nav class=nav>
<div class=logo>
<a href=https://weihanglo.tw accesskey=h title="Life is a refactoring process without tests (Alt + H)">Life is a refactoring process without tests</a>
<div class=logo-switches>
<button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
</button>
</div>
</div>
<ul id=menu>
<li>
<a href=https://weihanglo.tw/ title=Home>
<span>Home</span>
</a>
</li>
<li>
<a href=https://weihanglo.tw/archives/ title=Archives>
<span>Archives</span>
</a>
</li>
<li>
<a href=https://weihanglo.tw/tags/ title=Tags>
<span>Tags</span>
</a>
</li>
<li>
<a href=https://weihanglo.tw/about/ title=About>
<span>About</span>
</a>
</li>
</ul>
</nav>
</header>
<main class=main>
<article class=post-single>
<header class=post-header>
<h1 class=post-title>
WWW 0x08: ä½ çš„ Helm chart å®‰å…¨å—
</h1>
<div class=post-meta><span title="2020-03-14 00:00:00 +0800 +0800">March 14, 2020</span>&nbsp;Â·&nbsp;4 min
</div>
</header> <div class=toc>
<details>
<summary accesskey=c title="(Alt + C)">
<span class=details>Table of Contents</span>
</summary>
<div class=inner><ul>
<li>
<a href=#my-foss-storyhttpsblogburntsushinetfossother-thoughts-on-entitlement aria-label="My FOSS Story"><a href=https://blog.burntsushi.net/foss/#other-thoughts-on-entitlement>My FOSS Story</a></a></li>
<li>
<a href=#uncharted-territory--discovering-vulnerabilities-in-public-helm-chartshttpssnykiobloguncharted-territory-discovering-vulnerabilities-in-public-helm-charts aria-label="Uncharted territory â€“ discovering vulnerabilities in public Helm Charts"><a href=https://snyk.io/blog/uncharted-territory-discovering-vulnerabilities-in-public-helm-charts/>Uncharted territory â€“ discovering vulnerabilities in public Helm Charts</a></a></li>
<li>
<a href=#architecting-kubernetes-clusters--how-many-should-you-havehttpslearnk8siohow-many-clusters aria-label="Architecting Kubernetes clusters â€” how many should you have?"><a href=https://learnk8s.io/how-many-clusters>Architecting Kubernetes clusters â€” how many should you have?</a></a>
</li>
</ul>
</div>
</details>
</div>
<div class=post-content><blockquote>
<p>organizations which design systems are constrained to produce designs which are copies of the communication structures of these organizations.</p>
<p>&ndash;â€‰M. Conway</p>
</blockquote>
<p>é€™è£¡æ˜¯ WWW ç¬¬æŒæœŸï¼ŒWow Weihang Weekly æ˜¯ä¸€å€‹æ¯«ç„¡ç« æ³•çš„å€‹äººé€±åˆŠï¼Œå‡ºåˆŠé€±æœŸæ¥µä¸å›ºå®šï¼Œå¾ä¸€é€±åˆ°äº”å¹´éƒ½æœ‰å¯èƒ½ã€‚åˆæœŸå…§å®¹ä»¥è»Ÿé«”å·¥ç¨‹ç‚ºä¸»ï¼Œç­‰è²¡å¯Œè‡ªç”±å¾Œæœƒæœ‰æ›´å¤šé›œé£Ÿç¯‡ç« ã€‚</p>
<h2 id=my-foss-storyhttpsblogburntsushinetfossother-thoughts-on-entitlement><a href=https://blog.burntsushi.net/foss/#other-thoughts-on-entitlement>My FOSS Story</a><a hidden class=anchor aria-hidden=true href=#my-foss-storyhttpsblogburntsushinetfossother-thoughts-on-entitlement>#</a></h2>
<p>é€™ç¯‡æ–‡ç« æ˜¯ Rust ç¤¾ç¾¤éå¸¸æœ‰åçš„ Andrew Gallant (<a href=https://github.com/burntsushi>@burntsushi</a>) æ‰€æ’°ï¼Œè¬›è¿°äº†ä»–è‡ªèº«èˆ‡ FOSS çš„ç³¾è‘›ã€‚æ–‡ç« è£¡é¢è¨±å¤šç¯‡å¹…åœ¨æè¿° FOSS ä¸­çš„è² é¢äº‹æƒ…ï¼Œä¸éé€™ä¹Ÿæ˜¯é–‹æºç¤¾ç¾¤è¼ƒå°‘æåŠå’Œè™•ç†çš„ä¸€å¡Šã€‚é€™ç¯‡æ–‡ç« ä¹Ÿå¯ä»¥è¦–ç‚ºæ˜¯ burntsushi é‡å°æœ€è¿‘ Rust ç¤¾ç¾¤æœ€å¤§çš„ web framework <a href=https://github.com/actix/actix-web/issues/1289>Actix çš„ä½œè€…é€€å‡ºé–‹æºç•Œ</a>çš„æœ‰æ„Ÿè€Œç™¼ã€‚ç¯€éŒ„ä¸€äº›æˆ‘è¦ºå¾—å¯ä»¥å¸¶è‘—èµ°çš„å¯¦ç”¨æƒ³æ³•ï¼š</p>
<ul>
<li>è¨­ç«‹ç•Œç·šï¼šé–‹æºå³æ”¿æ²»ï¼Œç¶²è·¯ä¸Šå°±æ˜¯æœ‰ä¸€å †é…¸æ°‘ï¼Œå°±ç®—æ²’æœ‰ï¼Œä¹Ÿæœ‰å¤ªå¤šå¤ªå¤š issue å’Œ PR å£“å¾—æˆ‘å€‘å–˜ä¸éæ°£ï¼ŒæŠŠé–‹æºå·¥ä½œå’Œå€‹äººç”Ÿæ´»åˆ‡å‰²é–‹ä¾†ï¼Œè¨­ç«‹ç•Œç·šå’Œåœæé»ï¼Œè‡ªå·±çš„æ´»è‡ªå·±å®‰æ’ã€‚</li>
<li>éµå¾ªã€Œæ¯”ä¾‹åŸå‰‡ã€ï¼šå¦‚æœæå‡ºä¸€å€‹å•é¡Œå»åƒ…å¯¥å¯¥å¹¾è¡Œï¼Œå°±ç”¨å¯¥å¯¥å¹¾è¡Œå›è¦†å§ã€‚</li>
<li>å•é¡Œé‡ç¾ï¼šè‰¯å¥½çš„å•é¡Œå›å ±èƒ½æ­é…ç°¡å–®é‡ç¾æ–¹å¼æœ€æ£’ï¼Œå¦‚æœæ²’è¾¦æ³•ï¼Œé‚£å°±å¸¶è‘—ä½œè€…ä¸€èµ· debug å§ï¼</li>
</ul>
<p>ä½œè€…æœ€å¾Œé›–ç„¶è¡¨åˆ—è¨±å¤šè² é¢è¡Œç‚ºï¼Œä½†ä¹Ÿèªªäº† FOSS ä»ç„¶æœ‰è¨±å¤šæœ‰è¶£çš„ç¶“é©—å’Œç¾å¥½ã€‚ä¿¡ä»»ç‚ºé–‹æºä¹‹æœ¬ï¼Œå¸Œæœ›é€™ç¯‡æ–‡ç« èƒ½å¸¶çµ¦ FOSS ç•Œæ‰“æ»¾çš„æˆ‘å€‘æ›´å¤šå•Ÿç™¼ã€‚</p>
<h2 id=uncharted-territory--discovering-vulnerabilities-in-public-helm-chartshttpssnykiobloguncharted-territory-discovering-vulnerabilities-in-public-helm-charts><a href=https://snyk.io/blog/uncharted-territory-discovering-vulnerabilities-in-public-helm-charts/>Uncharted territory â€“ discovering vulnerabilities in public Helm Charts</a><a hidden class=anchor aria-hidden=true href=#uncharted-territory--discovering-vulnerabilities-in-public-helm-chartshttpssnykiobloguncharted-territory-discovering-vulnerabilities-in-public-helm-charts>#</a></h2>
<p><strong>âš ï¸âš ï¸âš ï¸ ä½ çš„ Helm chart å®‰å…¨å— âš ï¸âš ï¸âš ï¸</strong></p>
<p>å°ˆé–€åšå„å¤§èªè¨€çš„é–‹æºå¥—ä»¶å®‰å…¨æ€§æª¢é©—çš„ <a href=https://snyk.io>Snyk</a>ï¼Œé™¤äº†æª¢é©—åŸæœ‰çš„ npmã€PyPI ç­‰å¥—ä»¶ï¼Œæœ€è¿‘é–‹å§‹æª¢é©—èµ· Helm å®˜æ–¹çš„ stable charts ä¸­æ¯å€‹ image æ˜¯å¦æœ‰å®‰å…¨æ€§æ¼æ´ï¼Œä¸¦å‡ºä¸€ä»½<a href=https://snyk.io/wp-content/uploads/helm-report.pdf>å®‰å…¨æ€§å ±å‘Š</a>ã€‚å ±å‘ŠæŒ‡å‡ºï¼š</p>
<ul>
<li>277 å€‹ stable chart ä¸­ï¼Œ68% æœ‰é«˜åº¦å®‰å…¨æ€§æ¼æ´ï¼Œä½† 64% å¯ä»¥é€éå‡ç´š image ä¾†è§£æ±ºæ¼æ´</li>
<li>æœ€å¸¸è¦‹çš„é¢¨éšªæœ‰ï¼šout-of-bounds reads/writesã€access restriction bypassã€NULL pointer dereferenceï¼ˆä¸€å’Œä¸‰ Rust å®Œç¾è§£æ±ºï¼‰</li>
<li><a href=https://hub.docker.com/r/dduportal/bats><code>dduportal/bats:0.4.0</code></a> æ˜¯æœ€å¸¸ç”¨çš„ imageï¼Œä¹Ÿæ“æœ‰æœ€å¤šæ¼æ´ã€‚<code>postgres:9.6.2</code> ç¬¬äºŒã€‚<code>unguiculus/docker-python3-phantomjs-selenium:v1</code> ç¬¬ä¸‰ã€‚</li>
</ul>
<p>æ­¤å¤–ï¼ŒSnyk åŒæ™‚é–‹æºäº†<a href=https://github.com/snyk-labs/helm-snyk>ä¸€æ”¯æ–¹ä¾¿æª¢æŸ¥ Helm chart image å®‰å…¨æ€§çš„ Helm plugin</a>ï¼Œéå¸¸æ–¹ä¾¿ï¼Œ<del>é™¤äº†éœ€è¦è¨»å†Š Snyk å¸³è™Ÿé †ä¾¿ç«Šå–é›»å­éƒµä»¶ä¹‹å¤–</del>ã€‚</p>
<h2 id=architecting-kubernetes-clusters--how-many-should-you-havehttpslearnk8siohow-many-clusters><a href=https://learnk8s.io/how-many-clusters>Architecting Kubernetes clusters â€” how many should you have?</a><a hidden class=anchor aria-hidden=true href=#architecting-kubernetes-clusters--how-many-should-you-havehttpslearnk8siohow-many-clusters>#</a></h2>
<p><img loading=lazy src=https://learnk8s.io/a/6f3a82b403f001b6862a27ee3e41879b.svg alt>
</p>
<p>æœ¬ç¯‡æ–‡ç« èªªæ˜ä¸åŒæ•¸é‡çš„ cluster è¦åŠƒä¹‹æ‡‰ç”¨å ´æ™¯èˆ‡å„ªåŠ£å‹¢ï¼Œæ–‡å…§é™„æœ‰è¨±å¤šé€£çµï¼Œå€¼å¾—å»¶ä¼¸é–±è®€ã€‚</p>
<ul>
<li><a href=https://learnk8s.io/how-many-clusters#1-one-large-shared-cluster>å–®ä¸€å¤§å‹å…±ç”¨ cluster</a>ï¼šæ‰€æœ‰ä¸åŒç’°å¢ƒçš„ app éƒ½åœ¨åŒä¸€å€‹ cluster
<ul>
<li>âœ… è³‡æºåˆ©ç”¨ç‡é«˜</li>
<li>âœ… ä¾¿å®œ</li>
<li>âœ… ç®¡ç†å®¹æ˜“ï¼šCI/CD æµç¨‹ã€å‡ç´š k8s</li>
<li>ğŸ‘ å–®é»æ•…éšœæ©Ÿç‡é«˜ï¼šk8s å‡ç´šå¤±æ•—ã€clsuter-wide å…ƒä»¶å£æ‰</li>
<li>ğŸ‘ å®‰å…¨æ€§è¼ƒå·®ï¼šç‰©ç†éš”é›¢ç¨‹åº¦ä½ï¼Œå¯ä»¥é€é <a href=https://kubernetes.io/docs/concepts/policy/pod-security-policy/>PodSecurityPolicy</a> è™•ç†ï¼Œä½†ä¸¦éæ˜“äº‹</li>
<li>ğŸ‘ ç„¡ç‰©ç†è³‡æºéš”é›¢ï¼šè³‡æºéš”é›¢åªèƒ½é€é <a href=https://kubernetes.io/docs/concepts/configuration/manage-compute-resources-container/>resource request limit</a>ã€<a href=https://kubernetes.io/docs/concepts/policy/resource-quotas/>ResourceQuota</a> è™•ç†ï¼ŒåŒæ¨£ä¸å¥½è¨­å®š</li>
<li>ğŸ‘ å¤šä½¿ç”¨è€…ï¼šè¼ƒä¸å®‰å…¨ï¼Œé ˆé€šé <a href=https://kubernetes.io/docs/reference/access-authn-authz/rbac/>RBAC</a> é¡å¤–è¨­å®š</li>
<li>ğŸ‘ Cluster ä¸èƒ½ç„¡é™åˆ¶å¢é•·ï¼šnode å’Œ pod é‚„æœ‰ container åœ¨ cluster ä¸­éƒ½æœ‰ä¸€å€‹ç†è«–ä¸Šé™å€¼ï¼Œéœ€æ³¨æ„ã€‚</li>
</ul>
</li>
<li><a href=https://learnk8s.io/how-many-clusters#2-many-small-single-use-clusters>å¤šå€‹å°å‹å–®ä¸€ç”¨é€” cluster</a>ï¼šä¸åŒç’°å¢ƒï¼Œä¸åŒ app éƒ½å„è‡ªç¨ç«‹ä¸€å€‹ cluster
<ul>
<li>âœ… ç¸®å°çˆ†ç ´åŠå¾‘ï¼šä¸€å€‹ cluster æ›äº†å°±æ˜¯ä¸€å€‹ç‰¹å®šç’°å¢ƒçš„ app æ›äº†è€Œå·²</li>
<li>âœ… ç¨ç«‹éš”é›¢ï¼šæ¯å€‹å·¥ä½œè² è¼‰ï¼ˆworkloadï¼‰éƒ½æ˜¯ç¨ç«‹çš„ç’°å¢ƒã€OSã€CPUã€memory</li>
<li>âœ… è¼ƒå°‘ä½¿ç”¨è€…ï¼šæ›´å®¹æ˜“ç®¡ç† cluster çš„ access control</li>
<li>ğŸ‘ è³‡æºåˆ©ç”¨ç‡ä½</li>
<li>ğŸ‘ æ¯”è¼ƒè²´ï¼šdata plane å’Œ control plane éƒ½å¢åŠ äº†</li>
<li>ğŸ‘ è¤‡é›œçš„è·¨ cluster æ¬Šé™ç®¡ç†</li>
</ul>
</li>
<li><a href=https://learnk8s.io/how-many-clusters#3-cluster-per-application>ä¸€å€‹ app ä¸€å€‹ cluster</a>ï¼šæ¯å€‹ app çš„ä¸åŒç’°å¢ƒï¼ˆé–‹ç™¼ã€æ­£å¼ã€æ¸¬è©¦ï¼‰éƒ½æ”¾åœ¨åŒä¸€å€‹ cluster
<ul>
<li>âœ… cluster å¯ä»¥ç‚º app é‡èº«æ‰“é€ ï¼ˆe.g. MongodDB å°±å¯ä»¥ç”¨ zfs çš„ nodeï¼‰</li>
<li>ğŸ‘ ä¸åŒç’°å¢ƒåœ¨åŒä¸€å€‹ clusterï¼šæ¸¬è©¦æˆ–é–‹ç™¼ç’°å¢ƒå¦‚æœæœ‰ bugï¼Œå¯èƒ½æœƒå°è‡´æ­£å¼ç’°å¢ƒå´©å£</li>
</ul>
</li>
<li><a href=https://learnk8s.io/how-many-clusters#4-cluster-per-environment>ä¸€å€‹ç’°å¢ƒä¸€å€‹ cluster</a>ï¼šæŒ‰ç…§æ¸¬è©¦ã€é–‹ç™¼ã€æ­£å¼ç­‰ç’°å¢ƒå»ºç«‹ä¸åŒçš„ cluster
<ul>
<li>âœ… éš”é›¢ã€Œæ­£å¼ã€ç’°å¢ƒï¼ˆä¸å¿…è§£é‡‹ï¼‰</li>
<li>âœ… æœ€å°åŒ–æ­£å¼ç’°å¢ƒçš„ access controlï¼šé™¤äº† CI/CDï¼ŒåŸå‰‡ä¸Šæ²’æœ‰äººéœ€è¦é€²å…¥æ­£å¼ç’°å¢ƒ</li>
<li>ğŸ‘ APP ä¹‹é–“æ²’æœ‰éš”é›¢</li>
<li>ğŸ‘ ç’°å¢ƒæ²’æœ‰é‡å°ä¸åŒéœ€æ±‚æœ€ä½³åŒ–ï¼šä¾‹å¦‚æœ‰éœ€è¦ GPU çš„ appï¼Œé‚£å°±æ¯å€‹ç’°å¢ƒéƒ½éœ€è¦è£ä¸€å€‹ GPU node</li>
</ul>
</li>
</ul>
<p>æˆ‘å€‹äººçœ‹å®Œçš„çµè«–æ˜¯</p>
<ol>
<li>å…ˆå­¸å¥½å„ç¨® resource request limit å’Œ RBAC</li>
<li>æŠŠ service meshã€service discoveryã€API gateway é€™äº›åŸºç¤è¨­æ–½æå¥½ï¼Œè®“ inter-cluster æºé€šç„¡éšœç¤™</li>
<li>å¾ Cluster per environment é–‹å§‹æèµ·ï¼Œæœ‰éœ€æ±‚å†ç‰¹åŒ–å‡º app-specific cluster</li>
<li>æ°¸é è¨˜å¾— <a href=https://en.wikipedia.org/wiki/Conway%27s_law>Conway&rsquo;s law</a></li>
</ol>
</div>
<footer class=post-footer>
<ul class=post-tags>
<li><a href=https://weihanglo.tw/tags/weekly/>Weekly</a></li>
<li><a href=https://weihanglo.tw/tags/foss/>FOSS</a></li>
<li><a href=https://weihanglo.tw/tags/kubernetes/>Kubernetes</a></li>
</ul>
<nav class=paginav>
<a class=prev href=https://weihanglo.tw/posts/2020/www-0x09/>
<span class=title>Â« Prev</span>
<br>
<span>WWW 0x09: åˆ°åº•è¦ä¸è¦æ“”å¿ƒ blocking</span>
</a>
<a class=next href=https://weihanglo.tw/posts/2020/www-0x07/>
<span class=title>Next Â»</span>
<br>
<span>WWW 0x07: ç‚ºä»€éº¼è–¯é¤…è¦ç‚¸å…©æ¬¡</span>
</a>
</nav>
</footer>
</article>
</main>
<footer class=footer>
<span>CC BY-NC-SA 4.0</span>
<span>
Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a>
</span>
</footer>
<a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a>
<script>let menu=document.getElementById('menu');menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script>
<script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script>
<script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script>
</body>
</html>